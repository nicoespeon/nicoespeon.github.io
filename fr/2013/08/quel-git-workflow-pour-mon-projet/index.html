<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, minimum-scale=1.0"><meta name="description" content="Un petit tour d'horizon sur le git-flow, le GitHub flow et comment choisir le plus adapté à son projet."><meta property="og:site_name" content="@nicoespeon's blog" /><meta property="og:url" content="http://www.nicoespeon.com/fr/2013/08/quel-git-workflow-pour-mon-projet/" /><meta property="og:type" content="article" /><meta property="og:title" content="Quel git workflow pour mon projet ? | @nicoespeon" /><meta property="og:description" content="Un petit tour d'horizon sur le git-flow, le GitHub flow et comment choisir le plus adapté à son projet." /><meta property="og:image" content="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b" /><title>Quel git workflow pour mon projet ? | @nicoespeon</title><link rel="icon" href="/assets/img/icon.png"><link rel="author" href="https://plus.google.com/u/0/108378377887967941980"><!-- DNS prefetch for external resources --><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//platform.twitter.com"><link rel="dns-prefetch" href="//p.twitter.com"><link rel="dns-prefetch" href="//cdn.api.twitter.com"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="stylesheet"href='http://fonts.googleapis.com/css?family=Snippet|Roboto:300,100,700'><link rel="stylesheet" href="/assets/css/nicoespeon.css" media="screen"><link rel="stylesheet" href="/assets/css/nicoespeon-print.css" media="print"></head><body><div id="site"><div class="container"><div class="grid"><div class="grid__item seven-tenths portable-one-whole" role="main"><header class="media" role="banner"><!-- Brand logo --><img src="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b" class="media__img img--circle" alt="My avatar" width="80" height="80"/><!-- Main navigation --><nav class="media__body" role="navigation"><ul class="nav nav--main"><li><a href="/fr/index.html">Accueil</a></li><li><a href="/fr/about.html">À propos</a></li><li><a href="/fr/projects.html">Projets</a></li><li><a href="/fr/worth-reading.html">A Lire</a></li></ul></nav><!-- /navigation --></header><!-- /header --><article role="main"><h1>Quel git workflow pour mon projet ?</h1><div class="media"><a href="https://twitter.com/share" class="twitter-share-button media__img--rev" data-text="Quel git workflow pour mon projet ? |" data-via="nicoespeon">Tweeter</a><div class="media__body brand-face zeta">(15 Août, 2013)</div></div><p class="islet">Un petit tour d'horizon sur le git-flow, le GitHub flow et comment choisir le plus adapté à son projet.</p><h2 id="toc_0">TL;DR</h2><p>L&#39;une des grandes forces de git réside dans la simplicité de son système de branches.<br>Si vous êtes en charge d&#39;un projet, peut-être vous êtes-vous déjà posé la question : quel workflow mettre en place pour gérer efficacement mon projet, sans me compliquer la vie avec ce sympathique système de branches ?</p><p>Et forcèment : à ce problème, certains s&#39;y sont déjà penchés et ont apporté leurs solutions.</p><p>Le <em>git-flow</em> est probablement le plus connu, voire le seul d&#39;ailleurs.<br>Il s&#39;agit d&#39;un modèle de branches standard qui semble s&#39;adapter à n&#39;importe quel projet, pas trop complexe à prendre en main, avec quelques subtilités cependant.</p><p class="islet">Si la notion de versions a un sens pour votre projet, <a href="#le_gitflow">c'est ce workflow</a> qui peut vous intéresser.</p><p>Il existe une alternative pertinente qui a l&#39;avantage d&#39;être bien plus simple : le <em>GitHub flow</em>.<br>Le modèle tient en 6 règles simples qui n&#39;ont pas besoin de prendre en compte les subtilités du workflow précédent.</p><p class="islet">Si la notion de versions n'a pas spécialement de sens pour votre projet et que vous souhaitez mettre en place un workflow simplifié, <a href="#le_github_flow">c'est ce workflow</a> qui peut vous intéresser.</p><h2 id="toc_1">Le git-flow</h2><p>Ce workflow a été présenté le 5 Janvier 2010 par <a href="https://twitter.com/nvie">Vincent Driessen</a> comme un workflow de branchements git efficace. Il couvre l&#39;ensemble des besoins standards d&#39;un projet de développement classique.</p><h3 id="toc_2">Le principe</h3><p>Le <em>git-flow</em> présente le système de branches suivant :</p><div class="illustration"><img alt="Le célèbre git flow" title="Le célèbre git flow" src="/assets/img/git/git-flow-branching-model.jpg">Le modèle git-flow illustré</div><p>On distingue les branches principales, fixes et immuables :</p><ul><li><p><code>master</code> est la branche où tout est stable. Chaque commit correspond à une version stable du projet (*release*) qui peut être déployée en production et taguée en conséquence (*vX.Y.Z*).</p></li><li><p><code>develop</code> est la branche sur laquelle s&#39;effectue le développement proprement dit. On y prépare les changements en vue de la prochaine release dans <code>master</code>.</p></li></ul><p>Puis les branches secondaires qui se font et se défont avec le temps :</p><ul><li><p><code>feature</code> part de <code>develop</code> et se merge dans <code>develop</code>.</p><p>On crée une branche <strong>feature/xxx</strong> lorsque l&#39;on travaille sur une fonctionnalité en particulier. Lorsqu&#39;elle est terminée, on la merge dans <code>develop</code> pour ajouter la feature stable dans le scope de la prochaine release.</p></li><li><p><code>release</code> part de <code>develop</code> et se merge dans <code>master</code> et <code>develop</code>.</p><p>On crée une branche <strong>release/xxx</strong> à partir de <code>develop</code> lorsque celle-ci reflète l&#39;état désiré de la release (l&#39;ensemble des fonctionnalités du scope ont été mergées). Ainsi, on peut préparer la prochaine release tranquillement, corriger d&#39;éventuels bugs et poursuivre le développement en parallèle.</p><p>Une fois que la release est prête (stable) on merge alors la branche dans <code>master</code>, mais aussi dans <code>develop</code> pour mettre à jour les modifications apportées.</p></li><li><p><code>hotfix</code> part de <code>master</code> et se merge dans <code>master</code> et <code>develop</code> / <code>release</code>.</p><p>On crée une branche <strong>hotfix/xxx</strong> lorsque l&#39;on veut résoudre un bug critique en production rapidement. C&#39;est un peu comme une release non planifiée.</p><p>Lorsque le correctif est développé, on le merge dans <code>master</code> avec le numéro de version qui convient, ainsi que dans <code>develop</code> (ou la branche <code>release</code> en cours, le cas échéant) pour mettre à jour les modifications apportées.</p></li></ul><h3 id="toc_3">Liens utiles</h3><p>Je vous suggère de jeter un oeil <a href="http://nvie.com/posts/a-successful-git-branching-model/">sur l&#39;article original</a> pour en apprendre plus sur la question.</p><p>Pour vous simplifier la vie dans le terminal, sachez que l&#39;auteur a également mis au point <a href="https://github.com/nvie/gitflow">une extension git</a> pour implémenter simplement le <em>git-flow</em>.</p><p>Enfin, pour les utilisateurs de <em>SourceTree</em>, sachez que ce workflow est <a href="https://www.atlassian.com/git/workflows#!workflow-gitflow">nativement implémenté</a>.</p><p class="islet">Si vous êtes sous <strong>Windows</strong> ou <strong>Mac</strong> et que vous cherchez un bon client graphique pour git/mercurial, je vous recommande chaudement <a href="http://www.sourcetreeapp.com/">d'essayer SourceTree</a> d'ailleurs !</p><h2 id="toc_4">Le GitHub flow</h2><p><a href="https://twitter.com/chacon">Scott Chacon</a> l&#39;a présenté dans un post le 31 Août 2011. Il s&#39;agit d&#39;une version allégée du précédent et découle, en quelque sorte, du bon sens.</p><p>A noter que je garde ici la référence à GitHub par rapport au superbe post de Scott mais Atlassian (Bitbucket) le présente, par exemple, comme <a href="https://www.atlassian.com/git/workflows#!workflow-feature-branch">le workflow <em>feature branch</em></a>.</p><h3 id="toc_5">Le principe</h3><p>Je me suis permis d&#39;illustrer le <em>GitHub flow</em> de la manière suivante :</p><div class="illustration"><img alt="Le GitHub flow" title="Le GitHub flow" src="/assets/img/git/github-flow-branching-model.jpg">Le modèle GitHub flow illustré</div><p>Vous constaterez qu&#39;il n&#39;y a qu&#39;une seule branche <code>master</code> (pas de <code>develop</code> ici) et des features à gogo. Il est frappant de constater que le modèle est <strong>extrêmement simple</strong> et c&#39;est le but. La courbe d&#39;apprentissage est faible, les développeurs prennent rapidement en main ce workflow qui s&#39;avère parfaitement adapté dans certains cas de figures.</p><p>Ce workflow se base donc sur 6 règles essentielles :</p><h4 id="toc_6">1. Tout ce qui est dans <code>master</code> peut être déployé en production</h4><p><strong>La règle</strong> absolue, commune au <em>git-flow</em> d&#39;ailleurs. C&#39;est la seule branche consistante du projet et elle doit rester stable pour pouvoir se baser dessus et être déployée en production.</p><h4 id="toc_7">2. Créer des branches explicites depuis <code>master</code> (features)</h4><p>Lorsqu&#39;on souhaite travailler sur quelque chose (une fonctionnalité, un hotfix, etc.), on crée une branche depuis <code>master</code> avec un nom explicite, si possible : <code>bug-grunt-tests</code>, <code>infrastructure-ssl</code> ou <code>module-game-workers</code> sont des exemples tirés d&#39;un projet sur lequel je travaille actuellement par exemple.</p><h4 id="toc_8">3. Pousser sur <code>origin</code> régulièrement</h4><p>Contrairement au <em>git-flow</em>, où le développeur ne va pas forcément pousser sa branche <code>feature</code> locale sur le dépôt central, il s&#39;agit ici de pousser les branches régulièrement.</p><p>En effet, tant que nous ne sommes pas sur <code>master</code> il importe peu que la branche soit stable. En contrepartie, cela permet de <em>communiquer</em> avec l&#39;équipe.</p><h4 id="toc_9">4. Ouvrir une pull-request à tout moment</h4><p>Si votre projet est hébergé sur GitHub ou Bitbucket, sachez que les deux proposent une fonctionnalité extrêmement intéressante pour la revue de code : les pull-request.</p><p>Il est très facile, depuis une branche, de faire un diff avec <code>master</code> et d&#39;ouvrir une pull-request à n&#39;importe quel moment : que l&#39;on pense avoir terminé ou que l&#39;on soit coincé, la pull-request permet de demander une revue du code. Il est alors possible de commenter le code, d&#39;apporter des modifications et de visualiser ce que l&#39;on s&#39;apprête à fusionner dans <code>master</code>.</p><h4 id="toc_10">5. Fusionner seulement après une pull-request review</h4><p>Il s&#39;agit plus d&#39;un conseil que d&#39;une règle absolue. Mais c&#39;est la bonne pratique à mettre en place pour s&#39;assurer que la première règle est respectée : un développeur ne doit pas fusionner sa branche dans <code>master</code> lorsqu&#39;il pense que c&#39;est bon, un autre doit venir faire une revue du code et confirmer la stabilité de la branche.</p><p class="islet">Ainsi, si le merge vient mettre la pagaille sur `master`, on sait sur qui taper... 0:-)</p><p>Vous pouvez alors :</p><ul><li>fusionner la branche dans <code>master</code>, directement depuis la pull-request</li><li>supprimer la branche, devenue inutile, sur le serveur</li></ul><p>Si cela fait un moment que vous travaillez sur votre branche et que vous n&#39;êtes plus synchro avec <code>master</code>, <strong>vous ne pourrez pas fusionner directement depuis la pull-request</strong> car il y aura des conflits. Il vous suffit de faire un merge de <code>master</code> dans votre branche et règler les potentiels conflits pour la mettre à jour.</p><h4 id="toc_11">6. Déployer immédiatement après merge dans <code>master</code></h4><p>Une fois que la pull-request est validée, la branche est mergée dans <code>master</code> ce qui signifie que le tout est déployé en production (ou va être déployé sous peu).</p><p>C&#39;est également une façon d&#39;accentuer la pression sur la nécessaire stabilité de <code>master</code> : le développeur ne souhaite généralement pas que le déploiement de ses modifications ne casse tout, il fera donc d&#39;autant plus attention à la stabilité de son code avant de fusionner.</p><h3 id="toc_12">Quelques remarques</h3><p>Ce genre de workflow s&#39;adapte parfaitement à un projet pour lequel il n&#39;y a pas vraiment de <em>releases</em>, ni de <em>versions</em>.</p><p>On intègre en continue dans <code>master</code> les fonctionnalités et on déploie, parfois plusieurs fois par jour, le projet stable. On revient assez rarement (jamais) en arrière sur <code>master</code>.</p><p>Ainsi, il est difficile d&#39;ajouter une série de gros bugs. Si des problèmes apparaissent, ils sont rapidement résolus dans la foulée. Il n&#39;y a pas de différence entre une grosse feature et un petit hotfix avec ce process. Peu importe la nature du changement à effectuer, le workflow est toujours le même (et donc très simple à prendre en main).</p><h3 id="toc_13">Liens utiles</h3><p>Je vous suggère là encore de jeter un oeil <a href="http://scottchacon.com/2011/08/31/github-flow.html">sur l&#39;article original</a> pour en apprendre plus sur la question.</p><p>Techniquement, GitHub a fait en sorte de vous permettre de gérer ce workflow entièrement, <a href="https://github.com/blog/1557-github-flow-in-the-browser">directement depuis le navigateur</a>. Bitbucket se débrouille pas mal non plus.</p><p>Si vous en ressentez le besoin, il y a également <a href="https://github.com/github-flow/github-flow">une extension git</a> pour implémenter le workflow. Mais dans l&#39;ensemble, il se manie assez bien dans le navigateur.</p><h2 id="toc_14">Le mot de la fin</h2><p>Choisir son workflow dépend de la nature et des besoins de son projet. A vous de voir si ces exemples s&#39;adaptent plus ou moins à votre réalité, quitte à faire quelques adaptations si nécessaire.</p><p>Voici donc pour les workflows que j&#39;utilise, n&#39;hésitez pas à partager d&#39;autres pistes, d&#39;autres idées.</p><div id="disqus_thread" role="complementary"></div></article></div><div class="grid__item three-tenths portable-one-whole"role="complementary"><!-- Lang navigation --><nav role="navigation"><ul class="nav nav--stacked text--center"><li ><a href="/">English version</a></li><li class="current" ><a href="/fr/">Version française</a></li></ul></nav><!-- About --><aside class="text--justify"><p>Je m'appelle <span class='brand-face'>Nicolas</span> et je suis Directeur de Production chez <a href='http://www.metidia.com'>Metidia</a>.</p><p>Je <a href='/archive'>rédige</a> des articles sur le développement web et la gestion de projets. Je suis <a href='http://www.linkedin.com/profile/view?id=143126897'>LinkedIn</a>, je <a href='https://github.com/nicoespeon/'>code</a> et je <a href='http://twitter.com/nicoespeon'>tweet</a> pas mal aussi.</p></aside><!-- RSS --><aside><p class="text--center"><a href="http://www.nicoespeon.com/feed.xml"><i class="icon-connection"></i>&nbsp;Restez connectés</a></p></aside><!-- Tweets --><aside class="text--center visuallyhidden--portable"><a class="twitter-timeline" href="https://twitter.com/nicoespeon" data-widget-id="320422386929377280">Tweets de @nicoespeon</a></aside><aside class="visuallyhidden--portable push--top"><h2 class="text--center">Copains</h2><a href="http://iceranking.com">IceRanking.com</a> - (SEO) Cédric Brun, Consultant en Référencement Durable</aside></div></div></div><!-- /container --></div><!-- /main-content --><footer role="contentinfo"><div class="container"><p>&copy; 2015 - <a href="https://twitter.com/nicoespeon">Nicolas (Espeon) Carlo</a><br>Ce site est construit grâce à <a href='https://github.com/mojombo/jekyll'>Jekyll</a> et à <a href='http://inuitcss.com/'>inuit.css</a> de l'excellent <a href='https://twitter.com/csswizardry'>@csswizardry</a>. Le code source est <a href='https://github.com/nicoespeon/nicoespeon.github.io'>hébergé sur GitHub</a>.</p></div></footer><!-- jQuery --><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>$( function () {/*** This JS code is still small so its better to keep it inline.** Only apply if we are beyond the desk CSS breakpoint on load*/if ( $( window ).width() >= 1024 ) {var $timeline = $( "ul#timeline" );/*** Then hide every label description of the timeline*/$timeline.find( "a.timeline__label" ).each( function () {$( this ).find( "p" ).hide();} );/*** And delegate the visibility effect on hover for each label description*/$timeline.on( "mouseenter mouseleave", "a.timeline__label", function () {$( this ).find( "p" ).stop().toggle( "slow" );} );}} );</script><!-- Twitter API --><script>!function ( d, s, id ) {var js, fjs = d.getElementsByTagName( s )[0];if ( !d.getElementById( id ) ) {js = d.createElement( s );js.id = id;js.src = "//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore( js, fjs );}}( document, "script", "twitter-wjs" );</script><!-- Google Analytics --><script>var _gaq = _gaq || [];_gaq.push( ['_setAccount', 'UA-39957541-2'] );_gaq.push( ['_setDomainName', 'nicoespeon.com'] );_gaq.push( ['_trackPageview'] );(function () {var ga = document.createElement( 'script' );ga.type = 'text/javascript';ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName( 'script' )[0];s.parentNode.insertBefore( ga, s );})();</script><!-- Disqus --><script>var disqus_shortname = 'nicoespeon';var disqus_url = 'http://nicoespeon.com/fr/2013/08/quel-git-workflow-pour-mon-projet/';var title = "Quel git workflow pour mon projet ?";(function () {var dsq = document.createElement( 'script' );dsq.type = 'text/javascript';dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName( 'head' )[0] || document.getElementsByTagName( 'body' )[0]).appendChild( dsq );})();</script><noscript>Please enable JavaScript to view the <ahref="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></body></html>