<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, minimum-scale=1.0"><meta name="description" content="Retour sur la réalisation d'un blog multilingue avec Jekyll, après upgrade à la v1.5.1."><meta property="og:title" content="Un blog multilingue avec Jekyll 1.5 | @nicoespeon"/><meta property="og:type" content="article"/><meta property="og:description" content="Retour sur la réalisation d'un blog multilingue avec Jekyll, après upgrade à la v1.5.1."/><meta property="og:image"content="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b"/><title>Un blog multilingue avec Jekyll 1.5 | @nicoespeon</title><link rel="icon" href="/assets/img/icon.png"><link rel="author" href="https://plus.google.com/u/0/108378377887967941980"><!-- DNS prefetch for external resources --><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//platform.twitter.com"><link rel="dns-prefetch" href="//p.twitter.com"><link rel="dns-prefetch" href="//cdn.api.twitter.com"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="stylesheet"href='http://fonts.googleapis.com/css?family=Snippet|Roboto:300,100,700'><link rel="stylesheet" href="/assets/css/nicoespeon.css" media="screen"><link rel="stylesheet" href="/assets/css/nicoespeon-print.css" media="print"></head><body><div id="site"><div class="container"><div class="grid"><div class="grid__item seven-tenths portable-one-whole" role="main"><header class="media" role="banner"><!-- Brand logo --><imgsrc="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b"class="media__img img--circle" alt="My avatar" width="80"height="80"/><!-- Main navigation --><nav class="media__body" role="navigation"><ul class="nav nav--main"><li><a href="/fr/index.html">Accueil</a></li><li><a href="/fr/about.html">À propos</a></li><li><a href="/fr/projects.html">Projets</a></li><li><a href="/fr/worth-reading.html">A Lire</a></li></ul></nav><!-- /navigation --></header><!-- /header --><article role="main"><h1>Un blog multilingue avec Jekyll 1.5</h1><div class="media"><a href="https://twitter.com/share" class="twitter-share-button media__img--rev" data-text="Un blog multilingue avec Jekyll 1.5 |" data-via="nicoespeon">Tweeter</a><div class="media__body brand-face zeta">(05 Avril, 2014)</div></div><p class="islet">Retour sur la réalisation d'un blog multilingue avec Jekyll, après upgrade à la v1.5.1.</p><h2 id="_note_sur_la_compatibilit"><span class='icon-info' /> Note sur la compatibilité</h2><p>Ce qui suit se base sur l’utilisation de Jekyll <code>v1.5.1</code>.</p><p>Ce post fait suite à <a href="/fr/2013/05/faire-blog-multilingue-avec-jekyll">celui de Mai 2013</a> où je vous faisais mon retour d’expérience sur la création d’un blog en plusieurs langue. Depuis Jekyll a (sérieusement) monté en versions et voici les correctifs à apporter en ce sens.</p><h2 id="petit_rappels_sur_jekyll">Petit rappels sur Jekyll</h2><p>Après bientôt une année d’utilisation (quoiqu’ayant écrit peu d’articles ces derniers mois), voilà ce que je retiens de Jekyll :</p><ul><li>c’est la solution la plus simple pour réaliser un site web front-end avec le confort de la compilation (templates, plugins, etc.). Bien entendu, le fait que GitHub le prenne en charge nativement joue beaucoup en ce sens.</li><li>il bénéficie des avantages et inconvénients de Ruby on Rails (la beauté du langage, la prise de tête de la montée en versions)</li><li>écrire ses articles en Markdown, c’est vraiment pratique</li><li>si le fonctionnement standard ne nous convient pas, libre à nous de le surcharger avec nos propres plugins</li></ul><p>En revanche, si vous élaborez vous-même vos plugins, il vous faudra compiler tout d’abord votre site pour envoyer la version statique sur GitHub.</p><h2 id="speaking_franais_ze_retour">Speaking Français, ze retour</h2><p>Pour rappel, voici à quoi ressemble l’architecture de mon blog :</p><div class='highlight'><pre><code class='text'>.
|-- _data/          # Stock de variables et configuration
|-- _includes/      # Bouts de codes inclus ailleurs
|-- _layouts/       # Templates du site
|-- _plugins/       # Plugins pour surcharger de Jekyll
|-- assets/         # LESS/CSS, JS, images, ...
|-- fr/             # Categorie FR
|   |-- _posts/     # Articles en français
|   |-- index.html  # Pages html en français
|   |-- about.html
|   |-- (...)
|
|-- en/             # Catégorie EN
|   |-- _posts/     # Articles en anglais
|
|-- index.html      # Pages html par défaut (EN)
|-- about.html
|-- (...)
|-- _config.yml     # Fichier de configuration de Jekyll
</code></pre></div><p>Lorsqu’il est lancé, Jekyll génère le site statique final dans le dossier <code>_site/</code>. C’est cette version qui est envoyée (et servie) sur GitHub.</p><p class='islet'><strong>Note</strong> - J'ai retiré de <code>_config.yml</code> les variables qui dépendent de la langue et que je réutilise dans les templates.<br /><br />Elles sont désormais isolées proprement dans le fichier <code>_data/locales.yml</code>.</p><p>Naturellement, mettre à jour Jekyll de la <code>v0.12</code> à la <code>v1.5</code> a nécessité quelques arrangements dans le fichier <code>config.yml</code>, histoire de retirer ce qui était deprecié et ajouter ce qui manquait.</p><p>Egalement, il a fallu toucher aux plugins…</p><h2 id="_les_plugins_ce_qui_a_chang"><span class='icon-gift' /> Les plugins, ce qui a changé</h2><h4 id="1_pagination_par_catgorie">1. Pagination par catégorie</h4><p>C’est LE plugin qu’il a fallu modifier, le fonctionnement de la pagination ayant radicalement changé avec Jekyll.</p><p>N’ayant rien trouvé de convaincant, j’ai ré-écrit mon propre plugin <a href="https://gist.github.com/nicoespeon/9964343">category_pagination.rb</a>.</p><p>Ajoutez-le simplement à votre dossier <code>_plugins/</code>, puis configurez votre <code>config.yml</code> en fonction du comportement attendu :</p><ul><li><code>paginate_per_category: true</code> si vous souhaitez activer le plugin</li><li><code>default_category: &quot;en&quot;</code> <em>(optionnel)</em> si vous souhaitez que la pagination à la racine du projet ne prenne pas en compte tous les posts, mais uniquement ceux d’une catégorie</li></ul><p>Le plugin fonctionne très simplement :</p><ol><li>si je cherche à paginer à l’intérieur d’une catégorie (aka dossier),</li><li>la pagination ne considèrera que les posts de cette catégorie,</li><li>je peux définir une catégorie par défaut pour les fichiers qui se trouvent à la racine si je le souhaite (sinon, ça pagine tout).</li></ol><p>Je vous laisse jeter un oeil à <a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/fr/index.html">fr/index.html</a> si besoin.</p><p class='islet'><strong>Note</strong> - C'est un premier jet qui peut aussi servir de pagination par catégorie de manière assez simpliste et orientée. N'hésitez pas à proposer des améliorations =)</p><h4 id="2_filtre_i18n">2. Filtre i18n</h4><p><a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/i18n_filter.rb">i18n_filter.rb</a> customise le traitement de <code>page.date</code> en fonction de la langue.</p><p>J’ai du ajouter un fichier <a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_locales/fr.yml">_locales/fr.yml</a> afin de créer la fonction <code>localize</code>. Elle fonctionne de la même manière que <code>date</code> mais renvoie le format français de la date.</p><h2 id="et_voil_">Et voilà !</h2><p>Rien d’autre n’a vraiment changé, juste ces correctifs à apporter et le tour est joué. Si vous avez des suggestions, remarques ou soucis avec tout ça, faîtes-le moi savoir.</p><p>Plop !</p><div id="disqus_thread" role="complementary"></div></article></div><div class="grid__item three-tenths portable-one-whole"role="complementary"><!-- Lang navigation --><nav role="navigation"><ul class="nav nav--stacked text--center"><li ><a href="/">English version</a></li><li class="current"><a href="/fr/">Version française</a></li></ul></nav><!-- About --><aside class="text--justify"><p>Je m'appelle <span class='brand-face'>Nicolas</span> et je suis étudiant d'une école de commerce orientée IT, développeur web en freelance à mes heures.</p><p>Je <a href='/archive'>rédige</a> des articles sur le développement web et la gestion de projets. Je suis <a href='http://www.linkedin.com/profile/view?id=143126897'>LinkedIn</a>, je <a href='https://delicious.com/nicoespeon'>tague</a> et je <a href='http://twitter.com/nicoespeon'>tweet</a> pas mal aussi.</p></aside><!-- RSS --><aside><p class="text--center"><a href="http://nicoespeon.com/feed.xml"><i class="icon-connection"></i>&nbsp;Restez connectés</a></p></aside><!-- Tweets --><aside class="text--center visuallyhidden--portable"><a class="twitter-timeline" href="https://twitter.com/nicoespeon" data-widget-id="320422386929377280">Tweets de @nicoespeon</a></aside></div></div></div><!-- /container --></div><!-- /main-content --><footer role="contentinfo"><div class="container"><p>&copy; 2014 - <ahref="https://twitter.com/nicoespeon">Nicolas (Espeon) Carlo</a><br>Ce site est construit grâce à <a href='https://github.com/mojombo/jekyll'>Jekyll</a> et à <a href='http://inuitcss.com/'>inuit.css</a> de l'excellent <a href='https://twitter.com/csswizardry'>@csswizardry</a>. Le code source est <a href='https://github.com/nicoespeon/nicoespeon.github.io'>hébergé sur GitHub</a>.</p></div></footer><!-- jQuery --><scriptsrc="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>$( function () {/*** This JS code is still small so its better to keep it inline.** Only apply if we are beyond the desk CSS breakpoint on load*/if ( $( window ).width() >= 1024 ) {var $timeline = $( "ul#timeline" );/*** Then hide every label description of the timeline*/$timeline.find( "a.timeline__label" ).each( function () {$( this ).find( "p" ).hide();} );/*** And delegate the visibility effect on hover for each label description*/$timeline.on( "mouseenter mouseleave", "a.timeline__label", function () {$( this ).find( "p" ).stop().toggle( "slow" );} );}} );</script><!-- Twitter API --><script>!function ( d, s, id ) {var js, fjs = d.getElementsByTagName( s )[0];if ( !d.getElementById( id ) ) {js = d.createElement( s );js.id = id;js.src = "//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore( js, fjs );}}( document, "script", "twitter-wjs" );</script><!-- Google Analytics --><script>var _gaq = _gaq || [];_gaq.push( ['_setAccount', 'UA-39957541-2'] );_gaq.push( ['_setDomainName', 'nicoespeon.com'] );_gaq.push( ['_trackPageview'] );(function () {var ga = document.createElement( 'script' );ga.type = 'text/javascript';ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName( 'script' )[0];s.parentNode.insertBefore( ga, s );})();</script><!-- Disqus --><script>var disqus_shortname = 'nicoespeon';var disqus_url = 'http://nicoespeon.com/fr/2014/04/blog-multilingue-avec-jekyll-1-5';var title = "Un blog multilingue avec Jekyll 1.5";(function () {var dsq = document.createElement( 'script' );dsq.type = 'text/javascript';dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName( 'head' )[0] || document.getElementsByTagName( 'body' )[0]).appendChild( dsq );})();</script><noscript>Please enable JavaScript to view the <ahref="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></body></html>