<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, minimum-scale=1.0"><meta name="description" content="As a first post, what about sharing the way I managed to build this blog? Having a both english and french Jekyll website is not that hard, but you have to care about some crucial points."><meta property="og:site_name" content="@nicoespeon's blog" /><meta property="og:url" content="http://www.nicoespeon.com/en/2013/04/building-a-multinlingual-jekyll-blog/" /><meta property="og:type" content="article" /><meta property="og:title" content="Building a multilanguage Jekyll blog | @nicoespeon" /><meta property="og:description" content="As a first post, what about sharing the way I managed to build this blog? Having a both english and french Jekyll website is not that hard, but you have to care about some crucial points." /><meta property="og:image" content="https://fr.gravatar.com/userimage/27601663/eb6a327f57a4931bfdf6c213af65ed2d.jpg?size=300" /><title>Building a multilanguage Jekyll blog | @nicoespeon</title><link rel="icon" href="/assets/img/icon.png"><link rel="author" href="https://plus.google.com/u/0/108378377887967941980"><!-- DNS prefetch for external resources --><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//platform.twitter.com"><link rel="dns-prefetch" href="//p.twitter.com"><link rel="dns-prefetch" href="//cdn.api.twitter.com"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="stylesheet"href='http://fonts.googleapis.com/css?family=Snippet|Roboto:300,100,700'><link rel="stylesheet" href="/assets/css/nicoespeon.css" media="screen"><link rel="stylesheet" href="/assets/css/nicoespeon-print.css" media="print"></head><body><div id="site"><div class="container"><div class="grid"><div class="grid__item seven-tenths portable-one-whole" role="main"><header class="media" role="banner"><!-- Brand logo --><img src="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b" class="media__img img--circle" alt="My avatar" width="80" height="80"/><!-- Main navigation --><nav class="media__body" role="navigation"><ul class="nav nav--main"><li><a href="/index.html">Home</a></li><li><a href="/about.html">About</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/worth-reading.html">Worth Reading</a></li></ul></nav><!-- /navigation --></header><!-- /header --><article role="main"><h1>Building a multilanguage Jekyll blog</h1><div class="media"><div class="media__img"><a href="https://twitter.com/share" class="twitter-share-button" data-text="Building a multilanguage Jekyll blog |" data-via="nicoespeon">Tweeter</a></div><div class="media__body brand-face zeta">(07 April, 2013)</div></div><p class="islet">As a first post, what about sharing the way I managed to build this blog? Having a both english and french Jekyll website is not that hard, but you have to care about some crucial points.</p><h2 id="span-classicon-infospan-note-on-compatibility"><span class="icon-info"></span> Note on compatibility</h2><p>Which follows consider the use of Jekyll <code>v0.12.1</code>.</p><p>Looking for Jekyll <code>v1.5</code>? Go have a look <a href="/en/2014/04/multilingual-blog-with-jekyll-1-5/">to the one of April 2014</a>.</p><p>Please note that some major changes happened in Jekyll <code>v1.0.0</code> which made some of the following tricks not working anymore (I’m thinking about plugins). I’ll write a new post when upgrade my own Jekyll to v1.0+.</p><p>If you wish, you can still install the old Jekyll version with the following command:</p><div class="highlight"><pre><code class="bash"><span class="c"># Install the old version of jekyll</span>
<span class="nv">$ </span>sudo gem install jekyll --version 0.12.1

<span class="c"># Uninstall your current version if you dowloaded it</span>
<span class="nv">$ </span>sudo gem uninstall jekyll --version &lt;your current version&gt;
</code></pre></div><h2 id="why-jekyll">Why Jekyll?</h2><p>I won’t write a n-th post about the reason of choosing Jekyll as the static site generator for my blog. There are already <a href="https://www.google.fr/search?q=moving+blog+to+jekyll">plenty of them</a>.</p><p>I’ll just sum it up with the following bullet-points :</p><ul><li><strong>I don’t need to deal with a database</strong>. I just want to Keep It Simple (Stupid) and front-end will just do it well.</li><li><strong>I want to have my website updated when I push it to Github</strong>. I could have done some hook to deal with that but I don’t have to, thanks to <a href="https://help.github.com/categories/20/articles">Github Pages</a>.</li><li><strong>I love keeping myself up-to-date with new trends</strong>. And the Jekyll approach just sounds good to me.</li></ul><p>I could recommend you <a href="http://csswizardry.com/2012/12/a-new-css-wizardry/">the post from Harry Roberts</a> and <a href="http://hugogiraudel.com/2013/02/21/jekyll">the one from Hugo Giraudel</a> which comforted me in my choice.</p><h2 id="what-about-multilingual">What about multilingual?</h2><p>The thing is, Jekyll is not actually build to support multinlingual blogs. The <a href="http://liquid.rubyforge.org/classes/Liquid/StandardFilters.html#M000012">Liquid <code>date</code> filter</a> will display the english version of the date.Futhermore, if you want to distinguish posts by their language, then you have to create a category per language. But the Jekyll <code>.paginator</code> is not build to deal with categories, which is kind of a problem.</p><p>Nevertheless, I wanted to create my blog both in French and English for few reasons :</p><ol><li><strong>Most of the nicest websites treating about front-end development are in English</strong>, which is fine but I would like to see few of them written in my native language for other French developers who may not be fluent in English (even if they should be).</li><li><strong>I’m French and proud to be</strong>. Although I love English, there’s no reason for me not to write some posts in my native language too.</li><li><strong>This is a challenge</strong> and I love challenges… as every developer does, right?</li></ol><p><em>So here’s the strategy.</em>English is the default language, at the root level.Each language represents a category, which could be done thanks to the folders architecture.The French part should be under the <code>/fr</code> base url, which is fine with the previous statements.English posts should only display into <code>/index.html</code>, French posts should only display into <code>/fr/index.html</code> (and the pagination should be done accordingly).It should Keep It Simple (Stupid).</p><p>Let’s build the architecture for the source files:</p><div class="highlight"><pre><code class="text">.
|-- _includes/      # Partials included in other files
|-- _layouts/       # Templates of the website
|-- _plugins/       # Plugins to override Jekyll workflow
|-- assets/         # LESS/CSS, JS, images, ...
|-- fr/             # French category
|   |-- _posts/     # French posts
|   |-- index.html  # French html files
|   |-- about.html
|   |-- (...)
|
|-- en/             # English category
|   |-- _posts/     # English posts
|
|-- index.html      # Default html files (EN)
|-- about.html
|-- (...)
|-- _config.yml     # Jekyll configuration file
</code></pre></div><p>When launched, Jekyll generates the static final website into the <code>_site/</code> folder.</p><p class="islet">I use the <code>_config.yml</code> file to put some locale variables I could use in the main templates.<br /><br />This is definitely <strong>not the cleanest solution</strong> in my humble opinion, but it's quite easy to deal with and it works fine for the moment. It may change in the future in a smarter way to handle this.</p><h2 id="plugins-on-the-road">Plugins on the road</h2><p>In order to solve the mentioned problems, I used 2 plugins to override the regular Jekyll workflow.</p><h4 id="pagination-per-category">1. Pagination per category</h4><p><a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/category_pagination.rb">category_pagination.rb</a> has the paginator only considers posts of the current category in order to distinguish the two languages.</p><p>I modified the original plugin to have the default category, at root level, set as the <em>English</em> one instead of displaying all of the <code>site.posts</code>.</p><h4 id="i18n-filter">2. i18n Filter</h4><p><a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/i18n_filter.rb">i18n_filter.rb</a> customizes the <code>page.date</code> treatment accordingly to the locale.</p><p>I’ve had to add the <a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_locales/fr.yml">_locales/fr.yml</a> file to create the <code>localize</code> function. It performs just as the <code>date</code> does, but it displays the French format for the date.</p><h2 id="the-github-thing">The Github thing</h2><p>Plugins are set up, templates are built, design has been completed, the git workflow is ready and so is the remote repository on Github. <em>Let’s push!</em></p><p><a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">The DNS redirection for my custom domain</a> just works fine but… wait. It doesn’t play as expected.Damn it! I just notice that Github is running Jekyll in <code>--safe</code> mode, which means that plugins are disabled. And so are my category pagination and my i18n filter.</p><p><strong>For every problem, a solution</strong>, with Google being your best friend. <a href="http://charliepark.org/jekyll-with-plugins/">I found inspiration</a> to redesign my personal workflow in that way.</p><p><em>Let’s have a look to my branching model.</em>The <code>master</code> branch correspond to the compiled website (the one generated into <code>_site/</code> directory) so that Github can deliver it directly as a static website, thanks to the <code>.nojekyll</code> file.The <code>develop</code> branch correspond to the source files, as I would like to keep them tracked and open-sourced. They would be compiled with Jekyll in order to proceed to deployment.There’s no more merge from <code>develop</code> into <code>master</code> as there’s only deployments from now. I just work on <code>develop</code> and, when I’m ready, I deploy the whole site with a new commit on <code>master</code>.</p><p class="islet">Of course I already pushed the first commits when I realized I was wrong. But instead of recreating the whole repo and rebase my git history, I decided to deal with it with just few commits to correct the situation. There's no shame in doing mistakes after all.</p><p>I just create a <a href="https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/Makefile">Makefile</a> in order to do all that stuff with a <code>make deploy</code> command. And voilà!</p><h2 id="and-here-we-go">And here we go</h2><p>Here we are, it just works perfectly and I’m now ready to go with a both English and French, Jekyll-flavored, Github-hosted blog <em>\o/</em></p><p>There is still enhancements I should take care of -such as deploying a Google Analytics and a comments system- but I’m satisfied with the result. The challenge is taken up and the journey has begun. <strong>Let’s transform these posts into a monster.</strong></p><div id="disqus_thread" role="complementary"></div></article></div><div class="grid__item three-tenths portable-one-whole"role="complementary"><!-- Lang navigation --><nav role="navigation"><ul class="nav nav--stacked text--center"><li class="current" ><a href="/">English version</a></li><li ><a href="/fr/">Version française</a></li></ul></nav><!-- About --><aside class="text--justify"><p>My name is <span class='brand-face'>Nicolas</span> and I'm a french Consultant at <a href='http://www.octo.com/'>OCTO Technology</a>.</p><p>I <a href='/archive'>write</a> posts about web development and project management. I got <a href='http://www.linkedin.com/profile/view?id=143126897'>LinkedIn</a>, I <a href='https://github.com/nicoespeon/'>code</a> and I <a href='http://twitter.com/nicoespeon'>tweet</a> too.</p><p>I tend to <a href='https://medium.com/@nicoespeon'>post on Medium</a> now, in case you want to keep updated ;-)</p></aside><!-- RSS --><aside><p class="text--center"><a href="http://www.nicoespeon.com/feed.xml"><i class="icon-connection"></i>&nbsp;Stay tuned</a></p></aside><!-- Tweets --><aside class="text--center visuallyhidden--portable"><a class="twitter-timeline" href="https://twitter.com/nicoespeon" data-widget-id="320422386929377280">Tweets de @nicoespeon</a></aside><aside class="visuallyhidden--portable push--top"><h2 class="text--center">Friends</h2><a href="http://iceranking.com">IceRanking.com</a> - (SEO) Cédric Brun, Consultant en Référencement Durable</aside></div></div></div><!-- /container --></div><!-- /main-content --><footer role="contentinfo"><div class="container"><p>&copy; 2016 - <a href="https://twitter.com/nicoespeon">Nicolas (Espeon) Carlo</a><br>The website is built upon <a href='https://github.com/mojombo/jekyll'>Jekyll</a> and <a href='http://inuitcss.com/'>inuit.css</a> from the excellent <a href='https://twitter.com/csswizardry'>@csswizardry</a>. Source code is <a href='https://github.com/nicoespeon/nicoespeon.github.io'>hosted on GitHub</a>.</p></div></footer><!-- jQuery --><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>$( function () {/*** This JS code is still small so its better to keep it inline.** Only apply if we are beyond the desk CSS breakpoint on load*/if ( $( window ).width() >= 1024 ) {var $timeline = $( "ul#timeline" );/*** Then hide every label description of the timeline*/$timeline.find( "a.timeline__label" ).each( function () {$( this ).find( "p" ).hide();} );/*** And delegate the visibility effect on hover for each label description*/$timeline.on( "mouseenter mouseleave", "a.timeline__label", function () {$( this ).find( "p" ).stop().toggle( "slow" );} );}/*** Append anchor to page subtitles with IDs (used for blog posts).*/$( "h2[id], h3[id]" ).each( function () {var $title = $( this );var $anchor = $( "<a href='#" + $title.attr( "id" ) + "' class='anchor'><i class='icon-link'></i></a>" );$title.append( $anchor );} );} );</script><!-- Twitter API --><script>!function ( d, s, id ) {var js, fjs = d.getElementsByTagName( s )[0];if ( !d.getElementById( id ) ) {js = d.createElement( s );js.id = id;js.src = "//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore( js, fjs );}}( document, "script", "twitter-wjs" );</script><!-- Google Analytics --><script>var _gaq = _gaq || [];_gaq.push( ['_setAccount', 'UA-39957541-2'] );_gaq.push( ['_setDomainName', 'nicoespeon.com'] );_gaq.push( ['_trackPageview'] );(function () {var ga = document.createElement( 'script' );ga.type = 'text/javascript';ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName( 'script' )[0];s.parentNode.insertBefore( ga, s );})();</script><!-- Disqus --><script>var disqus_shortname = 'nicoespeon';var disqus_url = 'http://nicoespeon.com/en/2013/04/building-a-multinlingual-jekyll-blog/';var title = "Building a multilanguage Jekyll blog";(function () {var dsq = document.createElement( 'script' );dsq.type = 'text/javascript';dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName( 'head' )[0] || document.getElementsByTagName( 'body' )[0]).appendChild( dsq );})();</script><noscript>Please enable JavaScript to view the <ahref="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></body></html>