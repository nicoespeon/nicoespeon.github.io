{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about web development, agile practices and personal organization.","fr":"J’écris sur le développement web, les pratiques agiles et l’organisation personnelle."},"author":{"name":"Nicolas Carlo","twitter":"nicoespeon"},"disqusShortname":"nicoespeon","url":"https://www.nicoespeon.com"}},"markdownRemark":{"id":"05688e9c-3129-5ec8-a0a3-c6d03bb8f310","html":"<figure>\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.69921875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQP/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAdkq55VEJ//EABoQAAMAAwEAAAAAAAAAAAAAAAABAhESIjH/2gAIAQEAAQUCcweGhs7nOB9P/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AYf/xAAZEAEAAwEBAAAAAAAAAAAAAAABABARAiH/2gAIAQEABj8C3sSeULWs/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARITFBUYH/2gAIAQEAAT8hMAN4mXFMa3saeouz5LCyaNF8z//aAAwDAQACAAMAAAAQpB//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAj/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAECAQE/EENl/8QAGhABAQEBAQEBAAAAAAAAAAAAAREhAEExcf/aAAgBAQABPxDDtuMvx4BRrwi9XGH2u9kGbj4TkKYukDOqBVqNe//Z&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"cover\" title=\"\" src=\"/static/cover-fcecb912e5a93b39534338064ae732c9-d564d.jpeg\" srcset=\"/static/cover-fcecb912e5a93b39534338064ae732c9-865fd.jpeg 240w,\n/static/cover-fcecb912e5a93b39534338064ae732c9-d40a0.jpeg 480w,\n/static/cover-fcecb912e5a93b39534338064ae732c9-d564d.jpeg 960w,\n/static/cover-fcecb912e5a93b39534338064ae732c9-cfd28.jpeg 1024w\" sizes=\"(max-width: 960px) 100vw, 960px\">\n    </span>\n  </span>\n  \n  <figcaption>The art of merging streams &#x200A;&#x2014;&#x200A; Photo credits <a href=\"https://www.flickr.com/photos/31246066@N04/\">Ian Sane</a></figcaption>\n</figure>\n<p>Programming with Cycle.js / Rx.js needs you to take another approach to the code. We have to switch your brain to think with a different paradigm − functional and reactive, instead of imperative and passive.</p>\n<p>Unfortunately, there is a lack of concrete example, from concrete features, from real-life application.</p>\n<p>Since I’m building <a href=\"https://medium.com/@nicoespeon/introducing-a-tool-to-analyse-kanban-workflow-on-trello-built-with-cycle-js-875ea0b35391#.wxa1atz0x\">a tool to analyse Kanban metrics from a Trello board</a> with Cycle.js, I do have concrete examples.</p>\n<p>Here’s one use case I want to share with you to illustrate how you deal with the user clicking a button to perform an action when everything is a stream.</p>\n<h2 id=\"the-feature\"><a href=\"#the-feature\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The feature</h2>\n<p><a href=\"http://brodzinski.com/2013/07/cumulative-flow-diagram.html\">Cumulative Flow Diagram (CFD)</a> is a cool metric to help you understand what’s going on with our Kanban flow. In <a href=\"http://www.nicoespeon.com/trello-kanban-analysis-tool/\">TKAT</a>, data are taken from the Trello API, consolidated then parsed to produce it.</p>\n<p>However, this metric is contained in the entrails of the web app. This is not convenient if we want to re-use or share these information in any way (e.g., to build a global report for external stakeholders).</p>\n<p>What if the data was parsed and we can download a <code class=\"language-text\">.csv</code>? That would be awesome.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 400px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAEnklEQVQ4yz2Q609aBwDFb9d/YjZri8W1ClSgWgtDBSwogvKGqzzug3u5XLiCyAUuD7G8VCwoIn1ogVq0pe1q7Xy0plm3dK5LlixLPyzZsizZh2XZl2XJ/oSZLNsvJyc5yTlfDgAAwKlTp06cxWLJ5HIulyuVSgVCIY/HazvTJpfLe3t7ORxOZ2dn39W+k8hms/+fAHqF1DoypJb0NRu1z3aftx49etxq7e/vv9h5lk0wb958/nxnZ7PRqK/f3Wo2vz4+pplob79ErhoZGFECDO5MefEZo2anuVmr1dcqlcPDw7cnvD5azs69PDjY3d3d29s7Ojho1GuH+/vNhw9tHrcnGsbDQSDmhpNel6mLvT7lPHxwq8gESrlsdTFfXcgwJL6UiucTzEphYa1ULM3nymvVRDYzSeCIn3J4vUCSRBkCWbLK30dGj2OGFqGOOSyMyx5FbWGXM+F2MC4badZjRj3tMJonTFa3G5322ykKm6aApAehceTLNPLXgun3rOVd2Fgk4Lkpd4pE5l1g2uNMUSiNwTQCx0kXRBBOyk95oSihL8z4gASBRHAk5bb9lrf+uQg+JMaTyORJr0I6flyEnoWQJIH4YbsfsoVJeNKFQz4fhCBZzLTFeIAYjjA4EiVc2wHzr3Pa10F9lkBCbnQ7AP99G3uXwu6EqSDivBlxLSRJB+m2ER5oikpPwWWvFYi4oDAKxTxYK+Tcsg9GjIqTF5I+bMmH/1FGvp8D46C94sfvFaBgyIK7MJAgi5nwd3cYctIMzMCOEOKs0uSWU1odvogqpDQO5UgsgPlm1epZtYqBjcvzxuTKqF4r/mY19lU982098nbe40JQIIKjKQy8hYpXvep5fSc13O11DC7d1DUqnsN78z+8oPc21DfKQ76wUinuPcrgPz8O72xYa0E7ZgOBAIKU3cNZ/Xm3dqARVFHKj0IT/NjSaLOCvjyqv66BLVX7jdJwyGsE1SNaqbjsn2BoBQYNQhYNMI25K86+L/LjRyuBEioidWK/QUxSmkpe1vjU8eCBLu2WIWrFlMkcw70URIB6LWw2Oi0G2GwCgqBhGeS+mlVtBpTLVjZtEMyMcUNW6WJE/357+vg2VZ2BoEGFRijViozQiM6jk7vH5B6NjNBIgVmNcFpxLq/pCKv4FQsvPdZNqy/lNJxZ7XVaKxsVcvkd586f+ZB3gYWrRTOjPVElL/yfgPy4oAp20NfZBhGPz+sRXeb7VOz0eHdqTDim4nCvtAv4F7qFbPFQL20QpUYux1X8mKqbUV2OqfhAySCsTZyNDbZNXGV/cuXagFi2Al4oGPhFo+j4FrnXcK2XLIW4qbGYKKGmxDA3rhbGR7vjan5cIwBqkz0tqP2+tiMlY7nkPQqZcpsQZDQfF3Q9v6zTTxNYxqZ+W/D/tHmzgDtpRVdyrCdnvJY3XssZ+gBC0k7J2vSCs7kgUauuhsPRu8Xs0/ra6lxkZ2PlxZPtO+XiwfbGqyfNx5uNZ5sbq+kYJOHCEg4s6QL+5YPTpwdlcrPF2t/fLxmQ2p2w/LpiQDZkBSe0Op1Gq4dRbDoY9E0FLFawi8M9z2JdvHTpH/yd3pkI7YMgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"CSV files everywhere\"\n        title=\"\"\n        src=\"/static/csv-files-be1f2088705df236c839db0facc031f9-63047.png\"\n        srcset=\"/static/csv-files-be1f2088705df236c839db0facc031f9-c0309.png 240w,\n/static/csv-files-be1f2088705df236c839db0facc031f9-63047.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id=\"building-awesomeness-one-stream-at-a-time\"><a href=\"#building-awesomeness-one-stream-at-a-time\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building awesomeness, one stream at a time</h2>\n<p>From a user point of view, we would like to have a “<em>Download</em>” button somewhere close to the graph — probably just below. Clicking on this button will download the .csv of the current graph.</p>\n<p>If we change the period/selected lists range and then click on the download button, it should keep matching the displayed graph. We should be able to draw that graph again after we import our data into Excel/GSheet.</p>\n<p>In other words: each time a click on the button happens, download in CSV format the latest data.</p>\n<p>Let’s interpret this in Cycle.js terms:</p>\n<ul>\n<li><em>“each time …”</em>: subscribe to the following stream</li>\n<li><em>“… a click on the button happens, …”</em>: <code class=\"language-text\">downloadClicks$</code>, a stream representing button clicks</li>\n<li><em>“… download in CSV format …”</em>: a side-effect, performed by a dedicated <code class=\"language-text\">ExportToCSV</code> driver</li>\n<li><em>“… the latest data.”</em>: <code class=\"language-text\">csvData$</code>, a stream representing data</li>\n</ul>\n<p>There is already a stream containing CFD data since we display them already. We simply need to map them to produce a <code class=\"language-text\">csvData$</code> that matches the input format of <code class=\"language-text\">ExportToCSV</code> driver.</p>\n<p>Then, we need to combine our streams to get the latest value from <code class=\"language-text\">csvData$</code>whenever — and only when — an item is emitted in <code class=\"language-text\">downloadClicks$</code>.</p>\n<p>Brace yourself, there is a Rx.js operator for that: <a href=\"http://rxmarbles.com/#withLatestFrom\">withLatestFrom()</a>.</p>\n<p>This is what we want to achieve:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">downloadClicks$:  -------x------x----------------x----------&gt;\n       csvData$:  ---A---------------B----C--D-------E------&gt;\n\n                     withLatestFrom((clicks, data) =&gt; data)\n\n  downloadData$:  -------A------A----------------D----------&gt;</code></pre></div>\n<p>Combining our streams will produce another one (<code class=\"language-text\">downloadData$</code>) that will emit an item containing CSV-formatted data whenever a click happens on the button.</p>\n<h2 id=\"what-about-the-download\"><a href=\"#what-about-the-download\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What about the download?</h2>\n<p>Downloading a CSV file from formatted data, this looks like a job for a driver!</p>\n<p>Indeed, this kind of operations implies side-effects since the program needs to output something that is visible to the user. This is the part where our application unleash its added value. This is also the part where nasty bugs might lie, regarding the environment, the global state of the machine, etc.</p>\n<p>That’s why we prefer to move this part into a dedicated driver, away from our application logic.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.82697201017811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACaklEQVQoz3VT70/aUBTlf3X/gPs4Ez74xWmYZGYYJpkxWZTEDxjJjEhkZCQIwiJuYlv5TVtaSkt/UV5f2wfbhVZMlnlCXl5fzs09595D6M8rmM/nsyXg8hontOA9/3w4joMxVhSFoiiapnu93ng8RgjB+3+KV7AxBvbm5ubHaDQSiXyIRLZ3dt5vw7GzG90Nh8O1Wg1oZEZ8OSHDtvuaxmq65jiqorxZWzs6OrI8l+O4x05rMBj0+z1ZVoB6fn6eSqUWxYQEnV1CLBBESEtWKpJcA6UUlUh/ZTm2TP3mRTFdv9c1hZea+fyPt+vr3W7XInhoyi5xQ74AaF4fjVTdeLexcXWVcVxriqZNrm8Y+j11N9bU+yb9xDAnyRMTjTWkq1PTgWJ/YD/5AfjACCUSicPDQ3gcyXKZfhBF4ZG567Lsr26rfHOTTCZNPBaMBvasYGAqsmlp5NsAk1tbW5+WOIjHY7FYPP55f3//y0ECxra3t8fQT9COVemg2MS4LknLMS62yvM8wzCtVqvRfAGMgmVZ4Mzms0UPvekSHHgG2ZbrurZdLBaPj4/L5fL19XU2m83lcv55e3t7enoKm/cFSmYPeygoVhGqcPzAMGCTUOl5niiK0ApcwCkIAnBKpVK1WiXeYk+89kRmXjAwACxcmFgcz1crFYhXu90G5XBCbBqNhmEYhULh7OxsMplo9lAy+y8J8/vb02nm8vIyk4F4ss/odDqQUGQjmmZ6bFuwmJHJBglbZXO2/B4Oh+ANlH9fIp/Pg2G4gOd0On1x8U03tFWz0D9Zh78RTBvGC0nqLOFf4AVUWJYFslfkv1aWGhjhpgCOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"pure dataflow\"\n        title=\"\"\n        src=\"/static/pure-dataflow-ee7d9cb9644cbb01800651833c6d29cf-ffb10.png\"\n        srcset=\"/static/pure-dataflow-ee7d9cb9644cbb01800651833c6d29cf-179f5.png 240w,\n/static/pure-dataflow-ee7d9cb9644cbb01800651833c6d29cf-03a47.png 480w,\n/static/pure-dataflow-ee7d9cb9644cbb01800651833c6d29cf-ffb10.png 786w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>Our app is pure dataflow while downloading a CSV file is part of side effects stuff.</p>\n<p><em>Note: I didn’t find an open-sourced “downloadToCsv” driver at the time of implementing the feature, so I build my own for this project. With a very little refactoring, it can easily be open-sourced though.</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token constant\">R</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ramda'</span>\n\n<span class=\"token comment\">// Export a driver to be used in our Cycle.js app.</span>\n<span class=\"token comment\">// It takes an `input$` stream that contains `data` to be download.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">exportToCSVDriver</span><span class=\"token punctuation\">(</span>input$<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `data` should be formatted as an Array of Arrays (= lines of CSV).</span>\n  <span class=\"token comment\">// -> `[[\"name1\", \"city1\", \"other info\"], [\"name2\", \"city2\", \"more info\"]]`</span>\n  input$<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Parse data to create a CSV file.</span>\n    <span class=\"token comment\">// See: http://stackoverflow.com/questions/14964035/how-to-export-javascript-array-info-to-csv-on-client-side</span>\n    <span class=\"token keyword\">let</span> csvContent <span class=\"token operator\">=</span> <span class=\"token string\">'data:text/csv;charset=utf-8,'</span>\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>infoArray<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> dataString <span class=\"token operator\">=</span> infoArray<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span>\n      csvContent <span class=\"token operator\">+=</span> index <span class=\"token operator\">&lt;</span> data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dataString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\n`</span></span> <span class=\"token punctuation\">:</span> dataString\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Create a link in the page to trigger the download.</span>\n    <span class=\"token keyword\">const</span> link <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span>\n    link<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">encodeURI</span><span class=\"token punctuation\">(</span>csvContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Name the CSV file based on data attributes.</span>\n    <span class=\"token comment\">// Implementation is based on TKAT specificities (https://github.com/nicoespeon/trello-kanban-analysis-tool).</span>\n    <span class=\"token comment\">// This part can be refactor to open-source the driver.</span>\n    <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">head</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    link<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'download'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`cfd-from-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>head<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-to-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">R</span><span class=\"token punctuation\">.</span><span class=\"token function\">last</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.csv`</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Required for Firefox.</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Download the data file.</span>\n    link<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> exportToCSVDriver <span class=\"token punctuation\">}</span></code></pre></div>\n<p>The driver subscribe to an observable (= stream) input.</p>\n<p>Anytime it emits an event containing formatted data, it will perform the side-effect: download the CSV file from these data. Thus, we would simply pass our <code class=\"language-text\">downloadData$</code> stream and we’re done!</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 70.32967032967034%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACkklEQVQoz32S208aQRTG9y9rfGv61qR9rmna9EnTWrVQLyBKAFtN1NAmtqmtWlGQi4gWLylaiilRizesd0QQFUEWdpllZ2dnpgtEwkPTb05mspv55ZzzzWEIIfRWggSAoCzACZDLC6IoymJeEAAuIJDPiyJEUhaAAs8DjGXlPgMAkCSpDPMix7Isz3FZIKYzLM/zqMDxPCcDyBY/80hMQyhm2Nxm+DSbE4owhJD+V5XqIMSh7diHUb9a74zG0wxWKpDlyrXygQnBmFTzWU7wBfZ73s836ezNnY4WgyuWyDAKiRD6Z0KFv05zK6vHI7Zf2rfTDRqrqsvR3j2lhErvPjsvwVWZixUqOolee7+H331eaje5lVRNHZOtBmebaUqt9zTqvEpo39gTlylGsbRsWLkxhLDd87tRO9mgsb3qtLcanS1Gt1o/qwCvDe7u/rGJ8d7VHy+Sh/eJtMugksqOCAIcsgReaqxtJleLwdPc9a1J59V0u8yDQ15Px976k1zsnpy6Q5N35YOnJB8vGiaVemazoP/jUn2rq7lzQaX3GPrGhi29geXnsb2Hhasakqoh8QdoSy35viLnGh5J0GvElBom0fOsrm9BZbQMDA1Oe9q3gnU3+7Uo8oge1uOQQfJ/QnMe4tig4wfUukNdfjrjomyaIVg+jVyMfrEt2MwxnxmumGlgGC860IwP2oPi5E/omqOzU3h+TFg2Z4KmkzVdaF3rC2lYEGcglI7+hMFlnPICvYH0ipJLSm7kwtmRnDuh+JyiKAVHCERSXGQzunF4c3wmXETyCRFDpjIcuLSXJ8MSThr98YFgsmcl2RdMAalqgKrEVN63jJZt71o8rp3YrnPuPrZuP7Pv5AR4+5aE3Iby5y/GI8jrlRqodgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"download result\"\n        title=\"\"\n        src=\"/static/download-result-46b604b367b629773d5a360ad80dc5eb-c83f1.png\"\n        srcset=\"/static/download-result-46b604b367b629773d5a360ad80dc5eb-569e3.png 240w,\n/static/download-result-46b604b367b629773d5a360ad80dc5eb-93400.png 480w,\n/static/download-result-46b604b367b629773d5a360ad80dc5eb-c83f1.png 960w,\n/static/download-result-46b604b367b629773d5a360ad80dc5eb-23e13.png 1440w,\n/static/download-result-46b604b367b629773d5a360ad80dc5eb-01a65.png 1456w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>And here it is, our “Download .csv” button, waiting for users to click it!</p>\n<p><a href=\"https://github.com/nicoespeon/trello-kanban-analysis-tool/pull/25/files\">Here is the PR</a> that implemented the feature, in case you want to read the concrete diff.</p>\n<p>What are your feelings about this approach? Would you have done it differently? I’d love to discuss about it!</p>","fields":{"tagSlugs":["/tags/cycle-js/","/tags/rx-js/","/tags/functional-programming/"],"slug":"/en/2016/07/implementing-download-button-cycle-js/"},"timeToRead":4,"frontmatter":{"title":"Implementing a download button with Cycle.js","tags":["cycle.js","rx.js","functional programming"],"date":"2016-07-19T00:00:00.000Z","description":"A concrete example of programming with Cycle.js & Rx.js."}}},"pageContext":{"slug":"/en/2016/07/implementing-download-button-cycle-js/"}}