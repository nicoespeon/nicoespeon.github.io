{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about VS Code, web development and life in general.","fr":"Jâ€™Ã©cris Ã  propos de VS Code, du dÃ©veloppement web et de la vie en gÃ©nÃ©ral."},"author":{"name":"Nicolas Carlo","bluesky":"nicoespeon"},"url":"https://www.nicoespeon.com"}},"markdownRemark":{"id":"fd7cacef-f446-5f23-b641-610c1764001b","html":"<p>I use VS Code every day. I use it exclusively since February 2018, both personally and professionally. I like it a lot.</p>\n<p>But I am <em>frustrated</em>.</p>\n<p>I am frustrated because I miss a <strong>great</strong> tool to perform <strong>automated refactorings</strong> for me. And neither VS Code, neither existing extensions provide the experience Iâ€™m looking for!</p>\n<p><img src=\"/frustrated-6b45b4f3e49978b3ac79a693e637d601.gif\"></p>\n<p>Thus, 2 months ago, I decided to follow <a href=\"/en/2019/06/drawing-git-graphs-browser/\">my own advice</a> and hack my own problem. I started creating the VS Code extension I was looking for. This extension analyzes my code, suggests refactorings and executes them with the minimal amount of keystrokes needed.</p>\n<p><strong>It helps me focus on my intention instead of manually following the scripted mechanics of a refactoring.</strong></p>\n<figure>\n  <blockquote>\n    <p>I called this extension: <a href=\"https://marketplace.visualstudio.com/items?itemName=nicoespeon.abracadabra\">Abracadabra</a> âœ¨</p>\n  </blockquote>\n</figure>\n<p><img src=\"/abracadabra-demo-ff7a70954a50b63ddea5bceb419d8c23.gif\" alt=\"Gif of extracting variables with Abracadabra\"></p>\n<h2 id=\"why-wasnt-i-satisfied-with-vs-code-refactorings\"><a href=\"#why-wasnt-i-satisfied-with-vs-code-refactorings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why wasnâ€™t I satisfied with VS Code refactorings?</h2>\n<p>Itâ€™s true that VS Code ships with <a href=\"https://code.visualstudio.com/docs/editor/refactoring\">basic refactoring operations</a>. So whatâ€™s wrong?</p>\n<p>Well, speaking from a personal point of view, few things arenâ€™t great:</p>\n<ul>\n<li><strong>I need more than that.</strong> There are a lot of automated refactorings that I know and arenâ€™t proposed.</li>\n<li><strong>I canâ€™t just have the cursor on a variable and trigger an extraction.</strong> To get an appropriate suggestion requires selecting <em>exactly</em> the code to refactor. I need to select the whole extracted statement first, which is slowing me down.</li>\n<li><strong>I donâ€™t like the UX much.</strong> Talking about extraction, I often feel confused in front of all the suggested options. I need to play the computer in my head and decipher what â€œenclosing scopeâ€ vs. â€œmodule scopeâ€ means in terms of the resulting code. I <em>know</em> that there is a better way.</li>\n</ul>\n<figure>\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.20815752461322%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUklEQVQY0x3MS0/CQAAE4P5TDxp/g9FICBIQ49WDioJ4MV4NaNCoQMEI4VFMUKQFjBCghdJlu+12H12Lk8ncvpGAJSxDEIcSbFG8YhhSFzAMmAsQRAgSz/UIo8jDQW0crGe52EYO51zCcPWroq6mDyfGcLL4mS7644U6RtoM9CZAm0JtBjUdqobTNWhH91TdJSyA3Pd9iXOcyVYOktlEOh9PPRym89HkY/j8fe+yuJ+phK7k0HVlN1WK37yVB6A8hNW+ubSAECLQEqP05FYOnT1FLp5j6UI4+RJNlWIZeee0uJm43zrKbR/nNuJ3kfTrEpguggHzfS7+IzHGR4NOp1H4UsqfLbmryEqt0qhqSuejpjTrH61au1lV6u3e92Bujeam6XgGgDZcv0iEEEo9ghH1nPUSB9n2Cgqb+TYTiAtIBWQCEr50sOngBcI6WCGEAvwHk0Y3HcX2qDkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"VS Code shows a popup to either \" extract=\"\" to=\"\" function=\"\" in=\"\" module=\"\" scope\",=\"\" or=\"\" \"extract=\"\" constant=\"\" enclosing=\"\" scope\"\"=\"\" title=\"\" src=\"/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-c83f1.png\" srcset=\"/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-569e3.png 240w,\n/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-93400.png 480w,\n/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-c83f1.png 960w,\n/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-fa384.png 1422w\" sizes=\"(max-width: 960px) 100vw, 960px\">\n    </span>\n  </span>\n  \n  <figcaption>I understand what it means, but it takes precious seconds to process. Don&apos;t make me think!</figcaption>\n</figure>\n<p>Before using VS Code exclusively, I used Webstorm professionally for a few years. And I prefer VS Code: itâ€™s free, feels lighter to use and has a very active community.</p>\n<p>But there is one thing Webstorm nailed that VS Code doesnâ€™t provide: many, intuitive, automated refactorings.</p>\n<p><img src=\"/extract-function-webstorm-253e9f49e2323fddd9d5fcb72c7de396.gif\" alt=\"Gif of extracting a function in Webstorm\"></p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 281px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 142.34875444839858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEbElEQVRIx31WaVMbRxDdP5JKQgJGQkKHBehAq/sAdF/oxggJDDoQmMuYqpBUKp9SlZ/80q9lgWIUf+ia3dmZnn79XvescXb6Eaf9M0zGlxgNxzg/O8f19Bqfrm8wnUwxHk1we3OLwckAe6l9VEpVxCJxBAMmzN3QqwVDCAXDMJLxJHY8XjhsDrgd7+FxbcFpd8K56dLn987ZHL/brZtwbbr1m9P+1vzeAIwt9zZojKbf6+P4qIdWo43ehxMUckWNaHg+lPlj3WBd21DHNov9je1seWGEJFxGcH93j7FApp0NzjC6GKFZbyKd3BPnPUwEejQcw/qqZanDjXUbtj07MKLhqC5YXVnDTz+siP2stvLjL7CsWXUxnbz7dR2bG7O0EPa3xjRohH5fAAd7GZwI3LubO/Ql+ePRGN3OESKhKMJm5MWY9EUiOJfPFlCr1JCIJeHb8cPwbvuUvWwmh267i4bAbDXbArel8/FoAsl4So3scuOiZfYzyB7kZF18BtnlcKNx2JRTDkEJdVodJeFU8tg7PsEHIWN0McbjwyOOJOoL+Xbx8QI3n240r+PhRN/p1PLOKg4F/376QGHncwWNikQQEiHTSAZt/h4RqIx2Ps+9nN+w2GBUylWUixWFS2YpHUbFBczZ92yex1KxrPDJtOqwKkktFUpKBCEzfJ68SMgyo1MeXMyXNGKNcFMqoFquyWRRHR6L5g6rdV3M8qLx+f8c8uBcNo9oJAYrIzR3TRVwvVbH9PJKa5fV8vT4pDXMVITN6BvnhJtKpAVRV0mNSqRO0bORlElKgkTkMnmFqzKSkWXHDQUhi8Rl9rP/yS2fVT7SD6JyiNfuhhH0eUSQAez6g6J0H6hLmse9hQPR2PNvz1KWD/h8/1mlM3c4h8x9tKBEbGUO4+YO2hJFURrByXFfK4b66vcGevq8KhbZnTsjZCqESmEubXTokDAPJX8sIcKjeJlD5oUwFx0sksNnVhE7ElnmnM1qF4c2pzojKVfTK61jnsZCZ7taxux8JIKqRFevNTQVbG1GTOimQ57UOGyofPheKpSVmG+dLDpOxBJKJPdGQjEEY9tCSmAmm7KonRXC/J1LbTJaVg6JCYcib7TId4qZBcFK4RrPtos5dKIt3aUu0Q3FwaA/0I5NGKHgW6iLxhyzKCqlikrPsiqQKQ/qjWyxM5OgZqOlTqnHuYiXQY4LZKaFsF9YZj+rf3XCm296OdV2xKvgQfTXbR/p4mVs86AXHUrqlGWvsJlOpiWaPYWQSqReWhNlMWtby5sD180bsMpGrgsjLmXTbh3hcnIlzXOMdCojcgki4DPh98noNyUC8+s9bL7cxxxZrpoi6e50bF2XHO5KudWrci+U8mjWimq1Uk6tWsyhXBDL55CXKyIj+couMeaQdc7OZexJJ3m67eL3+zae79r45482/vrSwd/PHfz52MGX69l4Pexor2w1O6KKVyN5HBklu79h25C/AYcHbvlDcDleje+8Mmd/EzPjX4T7O8Yc/gtSAQb+tyZOPQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"List of available refactorings in Webstorm\"\n        title=\"\"\n        src=\"/static/webstorm-list-refactorings-422f35440b5c7a1cdd67c412817bfb4c-22c77.png\"\n        srcset=\"/static/webstorm-list-refactorings-422f35440b5c7a1cdd67c412817bfb4c-5fe8f.png 240w,\n/static/webstorm-list-refactorings-422f35440b5c7a1cdd67c412817bfb4c-22c77.png 281w\"\n        sizes=\"(max-width: 281px) 100vw, 281px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>This made me so productive back in the days. I relied on my editor to move fast ğŸ‡</p>\n<p>And I think it matters. If refactoring code takes 2 keystrokes Iâ€™m very likely to do it. If I have to find the correct combination of 5 keystrokes to make it work, Iâ€™m less likely. If I have to do it by handâ€¦ You get the idea.</p>\n<p><strong>Great automated refactorings are a productivity boost for every developer.</strong></p>\n<h2 id=\"but-wait-wasnt-there-an-extension-already\"><a href=\"#but-wait-wasnt-there-an-extension-already\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But wait, wasnâ€™t there an extension already?</h2>\n<p>Yes! And I used it for some time.</p>\n<p>I essentially work with JavaScript (and TypeScript). If you search for â€œJS refactoringâ€ <a href=\"https://marketplace.visualstudio.com/search?term=js%20refactoring&#x26;target=VSCode&#x26;category=All%20categories&#x26;sortBy=Relevance\">on VS Code Marketplace</a>, youâ€™ll find a promising extension called â€œJS Refactorâ€:</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.7134404057481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABYlAAAWJQFJUiTwAAABI0lEQVQY001Qu07EMBDMd/MBlCc+gCspaKioEdJxdFchSiSEooRc/Fq/X8FMQsFNYc/Oztq7203Tt7UmXMKHkKI5M/7woqQkTZfQWv+dxphuHDmRJ1L/eaVIG+WjmvnqcxZWuYEx1vc9yDiOIB2bnrV6S3lJKaaUMq5cCrH8foh1id6bYfTOtdZOp9Px9ZhzjhHyiu7r45pN9z+tQXTW1ZJra8vjzXJ3BRKI5qeDMwbF+/3tbrcDKaWgstbacXHWWnkf5nnmnKOlEOLcf0o2w3GGSIoLkXJWSmFO/Izmh2EQQnRSQLLWWcHhERgSPW0DFOedJoUQERahhMAq44Ytn7uIVee0fk4ESXvjSVZrkdOWkhQ1BBu9JYkHsBIyq62W6oL7BfkuiKF5wENdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"marketplace js refactoring\"\n        title=\"\"\n        src=\"/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-c83f1.png\"\n        srcset=\"/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-569e3.png 240w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-93400.png 480w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-c83f1.png 960w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-23e13.png 1440w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-10d8f.png 1920w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-a78a6.png 2366w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>I appreciate the good efforts that were put in it. At least someone worked to provide more refactorings, <strong>shared that for free</strong> and maintained it ğŸ‘ğŸ‘</p>\n<p>But at this point, it was not exactly what I needed, for a few reasons:</p>\n<ul>\n<li>I needed more refactorings operations. Iâ€™d consider operations like â€œAdd Exportâ€, â€œNegate Expressionâ€ or â€œWrap Selectionâ€ not being â€œrefactoringsâ€. Even if theyâ€™re handy, they modify code behavior.</li>\n<li>Also, sometimes, it didnâ€™t work well. It had some hiccups working on classes or on TypeScript.</li>\n<li>It handles partial selection better than VS Code, but it was still not as smooth as I was looking for. The UX was not the one I expected.</li>\n</ul>\n<p>At that point, the best move for me would have been:</p>\n<blockquote>\n<p>OK, maybe IÂ can contribute and improve it!</p>\n</blockquote>\n<p>Heading to <a href=\"https://github.com/cmstead/js-refactor\">the repository</a>, I was really happy to see it seemed well tested ğŸ‘</p>\n<p>But I felt the architecture was not quite what Iâ€™d have in mind. Iâ€™d have done abstractions differentlyâ€¦</p>\n<p>Now, Iâ€™m not saying this is bad and I know better. Actually, IÂ think the code is quite clean and well tested. But I started imagining how Iâ€™d build such solution, and I had this desire to make it happen. In fact, it would be a great opportunity for me to work on something where I could try things, fast, to scratch my own itch.</p>\n<p>Sure, building another extension is not the best idea, community wise. For the greater good, I should have reached the author of the existing extension and see how could I help. And, at some point, Iâ€™ll probably ping him to see how I could help, now that Iâ€™ve a clearer idea of how all of this could work.</p>\n<p>But for the moment, <strong>I wanted to build something on my own</strong>. Not to replace the existing extension, but to try something different. Something aligned with what I needed. Without having to deal with existing code and users.</p>\n<h2 id=\"abracadabra\"><a href=\"#abracadabra\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Abracadabra!</h2>\n<p>Thatâ€™s why, 2 months ago, I started to build this extension.</p>\n<p>My goal is essentially to <strong>build the tool Iâ€™m missing</strong>.</p>\n<p>There is a very cool side-effect of this: the learning part. Digging into <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\">Abstract Syntax Trees</a> manipulations is super interesting. Also, Iâ€™m discovering how to build a VS Code extension for the first time. Finally, itâ€™s a playground for me to test architectural decisions and practices, like <a href=\"https://github.com/nicoespeon/abracadabra/tree/master/docs/adr\">documenting architectural decisions through ADRs</a>.</p>\n<p>I implemented a couple of refactorings across these 2 months. I published the extension a few days ago <a href=\"https://marketplace.visualstudio.com/items?itemName=nicoespeon.abracadabra\">on the Marketplace</a>.</p>\n<p>Now Iâ€™m waiting for feedback to improve these first refactorings, fix edge cases and improve the UX to match what Iâ€™d expect from a <strong>great</strong> extension!</p>\n<p><img src=\"/magic-98f51cd9f53554f6d6ea08dbc350e379.gif\"></p>\n<h3 id=\"what-about-you\"><a href=\"#what-about-you\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What about you?</h3>\n<p>Well first, if you do JavaScript or TypeScript and youâ€™re looking for great automated refactorings, you can <a href=\"https://marketplace.visualstudio.com/items?itemName=nicoespeon.abracadabra\">give Abracadabra a try</a>!</p>\n<p>Then, if you want to help me, you can:</p>\n<ul>\n<li>Give me your feedbacks on what you like and what youâ€™d like to improve. Whether you find a bug, have a suggestion or just want to share something, <a href=\"https://github.com/nicoespeon/abracadabra/issues\">have a look at existing issues or open a new one</a>.</li>\n<li>If youâ€™d like to contribute, you can start with the <a href=\"https://github.com/nicoespeon/abracadabra/issues?q=is%3Aissue+is%3Aopen+label%3A%22%3Awave%3A+Good+first+issue%22\">â€œGood First Issuesâ€ Iâ€™ve listed</a>. Any kind of contribution is welcomed ğŸ™‚</li>\n<li>Spread the word so I can get more use-cases and more feedbacks to improve the extension!</li>\n</ul>\n<p>Thatâ€™s it. Iâ€™m really excited about this and happy to start spreading the word.</p>\n<p>Now, <em>I feel better</em>.</p>\n<p><img src=\"/thumbs-up-b8bf8658dd216b2ec14a1b9a27123f20.gif\"></p>","fields":{"tagSlugs":["/tags/vscode-extension/","/tags/abracadabra/","/tags/refactoring/","/tags/side-project/"],"slug":"/en/2019/07/introducing-refactoring-tool-vscode/"},"timeToRead":5,"frontmatter":{"title":"Introducing a refactoring tool for VS Code","tags":["vscode extension","abracadabra","refactoring","side-project"],"date":"2019-07-13T00:00:00.000Z","description":"I built \"Abracadabra\", a VS Code extension to do automated refactorings."}}},"pageContext":{"slug":"/en/2019/07/introducing-refactoring-tool-vscode/"}}