{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about VS Code, web development and life in general.","fr":"J’écris à propos de VS Code, du développement web et de la vie en général."},"author":{"name":"Nicolas Carlo","bluesky":"nicoespeon"},"url":"https://www.nicoespeon.com"}},"markdownRemark":{"id":"0ad0115c-d20d-5fef-930d-64254ed95f1a","html":"<h2 id=\"tldr\"><a href=\"#tldr\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h2>\n<p>Les sélecteurs sont interprétés <strong>de la droite vers la gauche</strong>.</p>\n<p><strong>En CSS</strong>, il est préférable d’utiliser une classe plutôt qu’un identifiant dans la mesure où le premier fait tout aussi bien que le second et même plus. L’idée est de garder la spécificité du sélecteur la plus basse possible pour simplifier la maintenabilité du code.</p>\n<p><strong>En JS</strong>, un identifiant et une spécificité accrue donnera de meilleurs résultats en terme de performance. Il s’agit d’aller droit au but. Inutile cependant d’être trop spécifique, c’est contre-productif.</p>\n<p><strong>Évitez d’utiliser le sélecteur universel <code class=\"language-text\">*</code> dans une chaîne de sélecteurs</strong>.</p>\n<p>Les deux pratiques ne sont pas incompatibles et n’empêchent pas votre HTML d’être sémantique :</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- HTML --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>article</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>main-article<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- … --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navigation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>nav nav--block pagination<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>pagination__prev<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token entity\" title=\"&lt;\">&amp;lt;</span> Previous<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>pagination__next<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Next <span class=\"token entity\" title=\"&gt;\">&amp;gt;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>article</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* CSS */</span>\n<span class=\"token selector\">.nav</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">list-style</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.nav--block</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* Mauvaise idée */</span>\n<span class=\"token selector\">.nav--block *</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* Pas de gros soucis */</span>\n<span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Javascript (jQuery)</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#main-article .nav--block .pagination__prev'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// fast</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#main-article .nav--block li.pagination__prev'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// faster</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#main-article'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.pagination__prev'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// super-fast</span></code></pre></div>\n<h2 id=\"en-css\"><a href=\"#en-css\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>En CSS</h2>\n<p>Ce qui va suivre relève de bonnes pratiques CSS connues sous le nom d’OOCSS (<em>Object Oriented CSS</em>). C’est une philosophie assez répandue et à laquelle j’adhère, mais ce n’est pas la seule façon de voir les choses. Je crois cependant qu’elle s’adapte à tout type de projets, grands ou petits, avec l’avantage d’être <em>future-proof</em>.</p>\n<p><a href=\"http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/\">Voici une introduction à ses principes</a>, pour ceux que ça intéresse, ainsi qu’une <a href=\"http://coding.smashingmagazine.com/2012/06/19/classes-where-were-going-we-dont-need-classes/\">vision alternative</a> (que je ne partage pas, mais qui a sa légitimité selon moi). Libre à chacun de suivre sa voie.</p>\n<h3 id=\"class-ou-id-\"><a href=\"#class-ou-id-\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Class ou ID ?</h3>\n<p>Pour faire bref, du point de vue du CSS <strong>une classe peut faire tout ce que fait un identifiant mais un identifiant ne peut pas être réutilisé</strong>.</p>\n<p>Partant de ce constat, l’usage d’une classe peut facilement se substituer à celui d’un identifiant et permet d’anticiper sur l’avenir.</p>\n<p>De plus, un identifiant augmente considérablement la spécificité de la déclaration, ce qui peut vite entraîner un joli bordel au fil du temps, et une utilisation inappropriée de <code class=\"language-text\">!important</code> ou autre déclarations de style inline, directement dans le HTML, pour surcharger le style désiré. Autrement dit, c’est pas joli à voir !</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Pas très future-proof --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>pagination<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token entity\" title=\"&lt;\">&amp;lt;</span> Previous<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Next <span class=\"token entity\" title=\"&gt;\">&amp;gt;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#pagination</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">list-style</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Quid si demain apparaît un autre type de pagination sur un module de la page ? On crée un nouvel identifiant avec un autre nom et peu ou prou les mêmes propriétés ? Et puis, la pagination n’est-elle pas une sorte de menu de navigation en soi ?</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Future-proof --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>nav pagination<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token entity\" title=\"&lt;\">&amp;lt;</span> Previous<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Next <span class=\"token entity\" title=\"&gt;\">&amp;gt;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.nav</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">list-style</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.pagination</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>La classe <code class=\"language-text\">.nav</code> est d’ailleurs parfaitement réutilisable, c’est une couche d’abstraction qui détermine les propriétés communes à tous mes menus de type <em>navigation</em> sur mon site (<em>à son pépère !</em>).</p>\n<h3 id=\"bewaaaaare-la-spécificité-\"><a href=\"#bewaaaaare-la-sp%C3%A9cificit%C3%A9-\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bewaaaaare la spécificité !</h3>\n<p>En CSS, <a href=\"http://blog.organicweb.fr/comprendre-le-poids-des-regles-css\">les règles de spécificité</a> sont plus ou moins simples, plus ou moins connues et engendrent plus ou moins de problèmes selon que l’on ait plus ou moins écrit son CSS intelligemment.</p>\n<p>Pour faire bien, faisons simple : <strong>ne vous lancez pas dans des sélecteurs trop spécifiques qui alourdissent la règle inutilement</strong>.</p>\n<p>Il s’agit de rester dans l’esprit OOCSS : les classes sont autant d’objets plus ou moins abstraits que l’on combine, tels des legos, pour produire le résultat attendu. C’est plus stable et maintenable dans le temps !</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">ol.nav</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span> <span class=\"token comment\">/* 0-0-1-1 spécification inutile */</span>\n<span class=\"token selector\">article > .nav li a</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span> <span class=\"token comment\">/* 0-0-1-3 trop spécifique ! */</span>\n<span class=\"token selector\">.pagination__prev</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span> <span class=\"token comment\">/* 0-0-1-0 OK */</span></code></pre></div>\n<p>L’idée est de produire un code CSS performant car :</p>\n<ul>\n<li>non dépendant du contexte HTML dans lequel il se trouve (flexibilité)</li>\n<li>pouvant être facilement surchargé (maintenabilité)</li>\n<li>accessoirement, simple à concevoir</li>\n</ul>\n<p>Un bon indicateur d’un CSS qui part en vrille réside dans le fait d’utiliser <code class=\"language-text\">!important</code> pour appliquer un style <em>“parce-que sinon ça ne marche pas et konsaipapourkoi”</em> !</p>\n<p>Si les chiffres ne sont pas votre fort (et que vous n’aimez pas mon lien précédent et son dessin récapitulatif), <a href=\"http://css-specificity.webapp-prototypes.appspot.com/\">voici un calculateur en ligne de spécificité CSS</a> qui peut vous aider. L’idée est de garder une spécificité avoisinant <code class=\"language-text\">[0-0-1-0]</code> pour vos règles (l’équivalent d’une classe CSS), d’une manière générale. Ainsi, plus de perte de temps à investiguer pourquoi votre style ne s’applique pas.</p>\n<h2 id=\"en-javascript\"><a href=\"#en-javascript\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>En Javascript</h2>\n<p><strong>N.B.</strong> - <em>Javascript</em> est un abus de langage ici dans la mesure où je parle de bibliothèques JS avec jQuery en référence.</p>\n<p>Il convient cependant de noter qu’en termes de performances, le JS pur donnera de meilleurs résultats et <code>document.getElementById()</code> est probablement <a href=\"http://jsperf.com/id-selector-comparison/3\">le plus performant</a>.</p>\n<h3 id=\"une-bonne-id\"><a href=\"#une-bonne-id\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Un(e) bon(ne) ID</h3>\n<p>L’identifiant est de loin le plus efficace des sélecteurs. Une fois que le moteur de sélection a trouvé l’élément, il arrête sa traversée du DOM. L’utilisation d’un identifiant est pertinente dans le cas du Javascript car l’on souhaite, la plupart du temps, travailler avec un élément bien précis, identifié.</p>\n<p>En bref, il est bien plus efficace <strong>d’isoler l’identifiant dans le sélecteur</strong>, puis de chainer avec une fonction de recherche, afin de limiter le champ de recherche du moteur :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#main-article .pagination__prev'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// rapide</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#main-article'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.pagination__prev'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2 fois plus rapide</span></code></pre></div>\n<p>Dans le premier cas, le moteur va chercher l’ensemble des éléments dans le DOM portant la classe <code class=\"language-text\">.pagination__prev</code>, puis rechercher ceux qui se trouvent dans le bloc identifié par <code class=\"language-text\">#main-article</code>.</p>\n<p>Dans le second cas, le moteur va d’abord rechercher le bloc <code class=\"language-text\">#main-article</code>, puis va chercher les éléments portant la classe <code class=\"language-text\">.pagination__prev</code> à l’intérieur de ce bloc.</p>\n<p>Je vous invite à <a href=\"http://jsperf.com/optimized-js-selectors\">tester par vous-même les performances</a>.</p>\n<h3 id=\"spécifique-mais-pas-trop\"><a href=\"#sp%C3%A9cifique-mais-pas-trop\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spécifique mais pas trop</h3>\n<p>Il s’agit d’un petit point mais <strong>augmenter la spécificité à droite de votre sélecteur</strong> peut permettre à votre moteur d’aller plus vite dans sa recherche effectivement.</p>\n<p>En revanche, inutile d’en faire des caisses : évitez d’alourdir inutilement votre sélecteur ou votre performance en pâtira.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ol.nav--block .muted'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// non-optimisé</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.nav--block li.pagination__next a.muted'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// non-optimisé</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.nav--block a.muted'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// optimisé</span></code></pre></div>\n<h2 id=\"gare-au-sélecteur-universel\"><a href=\"#gare-au-s%C3%A9lecteur-universel\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gare au sélecteur universel</h2>\n<p>MAJ le 4 Mai 2013 après une <a href=\"http://paulirish.com/2012/box-sizing-border-box-ftw/\">intéressante lecture</a> sur l’utilisation de <code>*</code> en CSS et son impact sur la performance (le paragraphe sur la performance).</p>\n<p>Que ce soit en CSS ou en JS, <code class=\"language-text\">*</code> peut devenir la bête noire des performances en terme de sélection.</p>\n<p>Mal utilisé en CSS ou, sans le savoir, dans les sélecteurs JS, c’est ce qu’il peut y avoir de pire pour le moteur de sélection qui doit se coltiner tous les éléments du DOM.</p>\n<p><strong>Dans le cas du CSS</strong>, posez-vous la question : ais-je vraiment besoin de cibler tous les éléments, quels qu’ils soient ? La réponse sera probablement “non”.</p>\n<p>Et n’allez pas croire que ceci est une bonne idée :</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.nav--block *</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Car si vous lisez <em>“dans les éléments <code class=\"language-text\">.nav--block</code>, tous les éléments”</em>, le moteur lira <em>“tous les éléments, puis ceux qui ont <code class=\"language-text\">.nav--block</code> comme parent”</em>. De droite à gauche on vous dit !</p>\n<p>En revanche, ceci ne posera pas de soucis de performance, à moins que vous en soyez à peaufiner votre score <a href=\"https://developers.google.com/speed/pagespeed\">Page Speed</a> au delà de 90 (autrement dit, c’est pas la priorité) :</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* apply a natural box layout model to all elements */</span>\n<span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">-moz-box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Dans le cas du JS</strong>, c’est encore plus fourbe car si vous ne faîtes pas attention, vous le suggérez par défaut. Enfin, il existe probablement des fonctions alternatives qui permettent d’arriver à exprimer ce que vous souhaitez faire.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.nav--block > *'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ouch !</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.nav--block'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// mieux</span>\n\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.form-fields :radio'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// = $('.form-fields *:radio');</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.form-fields input:radio'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// mieux</span></code></pre></div>\n<h2 id=\"le-mot-de-la-fin\"><a href=\"#le-mot-de-la-fin\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Le mot de la fin</h2>\n<p>Voilà pour mon petit point de vue sur les sélecteurs.</p>\n<p>Ce sont quelques bonnes pratiques que j’ai intégré avec le temps et qui sont ouvertes à la discussion ; n’hésitez pas à émettre des remarques, questions ou suggestions ci-dessous =)</p>\n<p>Plop !</p>","fields":{"tagSlugs":["/fr/tags/css/","/fr/tags/javascript/","/fr/tags/performance/"],"slug":"/fr/2013/05/optimiser-selecteurs-css-vs-js/"},"timeToRead":7,"frontmatter":{"title":"Optimiser ses sélecteurs, CSS vs. JS","tags":["css","javascript","performance"],"date":"2013-05-02T00:00:00.000Z","description":"Petit mémo de bonnes pratiques quant à l'utilisation de sélecteurs en CSS et en Javascript. Ce qui vaut pour l'un ne l'est pas nécessairement pour l'autre."}}},"pageContext":{"slug":"/fr/2013/05/optimiser-selecteurs-css-vs-js/"}}