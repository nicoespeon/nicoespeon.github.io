{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about VS Code, web development and life in general.","fr":"J’écris à propos de VS Code, du développement web et de la vie en général."},"author":{"name":"Nicolas Carlo","twitter":"nicoespeon"},"url":"https://www.nicoespeon.com"}},"markdownRemark":{"id":"0dd9aa5f-ebd4-512a-b870-ccee9b473c07","html":"<h2 id=\"note-sur-la-compatibilité\"><a href=\"#note-sur-la-compatibilit%C3%A9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Note sur la compatibilité</h2>\n<p>Ce qui suit se base sur l’utilisation de Jekyll <code class=\"language-text\">v1.5.1</code>.</p>\n<p>Ce post fait suite à <a href=\"/fr/2013/05faire-blog-multilingue-avec-jekyll\">celui de Mai 2013</a> où je vous faisais mon retour d’expérience sur la création d’un blog en plusieurs langue. Depuis Jekyll a (sérieusement) monté en versions et voici les correctifs à apporter en ce sens.</p>\n<h2 id=\"petit-rappels-sur-jekyll\"><a href=\"#petit-rappels-sur-jekyll\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Petit rappels sur Jekyll</h2>\n<p>Après bientôt une année d’utilisation (quoiqu’ayant écrit peu d’articles ces derniers mois), voilà ce que je retiens de Jekyll :</p>\n<ul>\n<li>c’est la solution la plus simple pour réaliser un site web front-end avec le confort de la compilation (templates, plugins, etc.). Bien entendu, le fait que GitHub le prenne en charge nativement joue beaucoup en ce sens.</li>\n<li>il bénéficie des avantages et inconvénients de Ruby on Rails (la beauté du langage, la prise de tête de la montée en versions)</li>\n<li>écrire ses articles en Markdown, c’est vraiment pratique</li>\n<li>si le fonctionnement standard ne nous convient pas, libre à nous de le surcharger avec nos propres plugins</li>\n</ul>\n<p>En revanche, si vous élaborez vous-même vos plugins, il vous faudra compiler tout d’abord votre site pour envoyer la version statique sur GitHub.</p>\n<h2 id=\"speaking-français-ze-retour\"><a href=\"#speaking-fran%C3%A7ais-ze-retour\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Speaking Français, ze retour</h2>\n<p>Pour rappel, voici à quoi ressemble l’architecture de mon blog :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n|-- _data/ # Stock de variables et configuration\n|-- _includes/ # Bouts de codes inclus ailleurs\n|-- _layouts/ # Templates du site\n|-- _plugins/ # Plugins pour surcharger de Jekyll\n|-- assets/ # LESS/CSS, JS, images, …\n|-- fr/ # Categorie FR\n| |-- _posts/ # Articles en français\n| |-- index.html # Pages html en français\n| |-- about.html\n| |-- (…)\n|\n|-- en/ # Catégorie EN\n| |-- _posts/ # Articles en anglais\n|\n|-- index.html # Pages html par défaut (EN)\n|-- about.html\n|-- (…)\n|-- _config.yml # Fichier de configuration de Jekyll</code></pre></div>\n<p>Lorsqu’il est lancé, Jekyll génère le site statique final dans le dossier <code class=\"language-text\">_site/</code>. C’est cette version qui est envoyée (et servie) sur GitHub.</p>\n<p><strong>Note</strong> - J’ai retiré de <code>_config.yml</code> les variables qui dépendent de la langue et que je réutilise dans les templates.</p>\n<p>Elles sont désormais isolées proprement dans le fichier <code>_data/locales.yml</code>.</p>\n<p>Naturellement, mettre à jour Jekyll de la <code class=\"language-text\">v0.12</code> à la <code class=\"language-text\">v1.5</code> a nécessité quelques arrangements dans le fichier <code class=\"language-text\">config.yml</code>, histoire de retirer ce qui était deprecié et ajouter ce qui manquait.</p>\n<p>Egalement, il a fallu toucher aux plugins…</p>\n<h2 id=\"les-plugins-ce-qui-a-changé\"><a href=\"#les-plugins-ce-qui-a-chang%C3%A9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Les plugins, ce qui a changé</h2>\n<h3 id=\"1-pagination-par-catégorie\"><a href=\"#1-pagination-par-cat%C3%A9gorie\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Pagination par catégorie</h3>\n<p>C’est LE plugin qu’il a fallu modifier, le fonctionnement de la pagination ayant radicalement changé avec Jekyll.</p>\n<p>N’ayant rien trouvé de convaincant, j’ai ré-écrit mon propre plugin <a href=\"https://gist.github.com/nicoespeon/9964343\">category_pagination.rb</a>.</p>\n<p>Ajoutez-le simplement à votre dossier <code class=\"language-text\">_plugins/</code>, puis configurez votre <code class=\"language-text\">config.yml</code> en fonction du comportement attendu :</p>\n<ul>\n<li><code class=\"language-text\">paginate_per_category: true</code> si vous souhaitez activer le plugin</li>\n<li><code class=\"language-text\">default_category: &quot;en&quot;</code> <em>(optionnel)</em> si vous souhaitez que la pagination à la racine du projet ne prenne pas en compte tous les posts, mais uniquement ceux d’une catégorie</li>\n</ul>\n<p>Le plugin fonctionne très simplement :</p>\n<ol>\n<li>si je cherche à paginer à l’intérieur d’une catégorie (aka dossier),</li>\n<li>la pagination ne considèrera que les posts de cette catégorie,</li>\n<li>je peux définir une catégorie par défaut pour les fichiers qui se trouvent à la racine si je le souhaite (sinon, ça pagine tout).</li>\n</ol>\n<p>Je vous laisse jeter un oeil à <a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/fr/index.html\">fr/index.html</a> si besoin.</p>\n<p><strong>Note</strong> - C’est un premier jet qui peut aussi servir de pagination par catégorie de manière assez simpliste et orientée. N’hésitez pas à proposer des améliorations =)</p>\n<h3 id=\"2-filtre-i18n\"><a href=\"#2-filtre-i18n\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Filtre i18n</h3>\n<p><a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/i18n_filter.rb\">i18n_filter.rb</a> customise le traitement de <code class=\"language-text\">page.date</code> en fonction de la langue.</p>\n<p>J’ai du ajouter un fichier <a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_locales/fr.yml\">_locales/fr.yml</a> afin de créer la fonction <code class=\"language-text\">localize</code>. Elle fonctionne de la même manière que <code class=\"language-text\">date</code> mais renvoie le format français de la date.</p>\n<h2 id=\"et-voilà-\"><a href=\"#et-voil%C3%A0-\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Et voilà !</h2>\n<p>Rien d’autre n’a vraiment changé, juste ces correctifs à apporter et le tour est joué. Si vous avez des suggestions, remarques ou soucis avec tout ça, faîtes-le moi savoir.</p>\n<p>Plop !</p>","fields":{"tagSlugs":["/fr/tags/jekyll/","/fr/tags/i-18-n/"],"slug":"/fr/2014/04/blog-multilingue-avec-jekyll-1-5/"},"timeToRead":3,"frontmatter":{"title":"Un blog multilingue avec Jekyll 1.5","tags":["jekyll","i18n"],"date":"2014-04-05T00:00:00.000Z","description":"Retour sur la réalisation d'un blog multilingue avec Jekyll, après upgrade à la v1.5.1."}}},"pageContext":{"slug":"/fr/2014/04/blog-multilingue-avec-jekyll-1-5/"}}