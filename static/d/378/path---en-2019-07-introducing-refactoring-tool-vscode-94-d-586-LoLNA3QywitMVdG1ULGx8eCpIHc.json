{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about web development, agile practices and personal organization.","fr":"J’écris sur le développement web, les pratiques agiles et l’organisation personnelle."},"author":{"name":"Nicolas Carlo","twitter":"nicoespeon"},"disqusShortname":"nicoespeon","url":"https://www.nicoespeon.com"}},"markdownRemark":{"id":"15b73699-02e6-5d14-a1fa-5955e3cfef1a","html":"<p>I use VS Code every day. I use it exclusively since February 2018, both personnally and professionnally. I like it a lot.</p>\n<p>But I am <em>frustrated</em>.</p>\n<p>I am frustrated because I miss a <strong>great</strong> tool to perform <strong>automated refactorings</strong> for me. And neither VS Code, neither existing extensions do provide the experience I’m looking for!</p>\n<p><img src=\"/frustrated-6b45b4f3e49978b3ac79a693e637d601.gif\"></p>\n<p>Thus, 2 months ago, I decided to follow <a href=\"/en/2019/06/drawing-git-graphs-browser/\">my own advice</a> and hack my own problem. I started creating the VS Code extension I was looking for. This extension analyzes my code, suggests refactorings and executes them with the minimal amount of keystrokes needed. <strong>It helps me focus on my intention instead of manually following the scripted mechanics of a refactoring.</strong></p>\n<figure>\n  <blockquote>\n    <p>I called this extension: <a href=\"https://marketplace.visualstudio.com/items?itemName=nicoespeon.abracadabra\">Abracadabra</a> ✨</p>\n  </blockquote>\n</figure>\n<p><img src=\"/abracadabra-demo-ff7a70954a50b63ddea5bceb419d8c23.gif\" alt=\"Gif of extracting variables with Abracadabra\"></p>\n<h2 id=\"why-wasnt-i-satisfied-with-vs-code-refactorings\"><a href=\"#why-wasnt-i-satisfied-with-vs-code-refactorings\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why wasn’t I satisfied with VS Code refactorings?</h2>\n<p>It’s true that VS Code ships with <a href=\"https://code.visualstudio.com/docs/editor/refactoring\">basic refactoring operations</a>. So what’s wrong?</p>\n<p>Well, speaking from a personal point of view, few things aren’t great:</p>\n<ul>\n<li>There are a lot of automated refactorings that I know and aren’t proposed. I need more than that.</li>\n<li>To get an appropriate suggestion requires selecting <em>exactly</em> the code to refactor. I can’t just have the cursor on a variable and trigger an extraction. I need to select the whole extracted statement first, which is slowing me down.</li>\n<li>I don’t like the UX much. Talking about extraction, I often feel confused in front of all the suggested options. I need to play computer in my head and decipher what “enclosing scope” vs. “module scope” means in terms of resulting code. I <em>know</em> that there is a better way.</li>\n</ul>\n<figure>\n\t\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32.20815752461322%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUklEQVQY0x3MS0/CQAAE4P5TDxp/g9FICBIQ49WDioJ4MV4NaNCoQMEI4VFMUKQFjBCghdJlu+12H12Lk8ncvpGAJSxDEIcSbFG8YhhSFzAMmAsQRAgSz/UIo8jDQW0crGe52EYO51zCcPWroq6mDyfGcLL4mS7644U6RtoM9CZAm0JtBjUdqobTNWhH91TdJSyA3Pd9iXOcyVYOktlEOh9PPRym89HkY/j8fe+yuJ+phK7k0HVlN1WK37yVB6A8hNW+ubSAECLQEqP05FYOnT1FLp5j6UI4+RJNlWIZeee0uJm43zrKbR/nNuJ3kfTrEpguggHzfS7+IzHGR4NOp1H4UsqfLbmryEqt0qhqSuejpjTrH61au1lV6u3e92Bujeam6XgGgDZcv0iEEEo9ghH1nPUSB9n2Cgqb+TYTiAtIBWQCEr50sOngBcI6WCGEAvwHk0Y3HcX2qDkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"VS Code shows a popup to either \" extract=\"\" to=\"\" function=\"\" in=\"\" module=\"\" scope\",=\"\" or=\"\" \"extract=\"\" constant=\"\" enclosing=\"\" scope\"\"=\"\" title=\"\" src=\"/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-c83f1.png\" srcset=\"/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-569e3.png 240w,\n/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-93400.png 480w,\n/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-c83f1.png 960w,\n/static/confusing-vscode-extraction-572e00251e6e2f0e096b770c58fc0ade-fa384.png 1422w\" sizes=\"(max-width: 960px) 100vw, 960px\">\n    </span>\n  </span>\n  \n\t<figcaption>I understand what it means, but it takes precious seconds to process. Don&apos;t make me think!</figcaption>\n</figure>\n<p>Before using VS Code exclusively, I used Webstorm professionnally for a few years. And I prefer VS Code: it’s free, feels lighter to use and has a very active community. But there is one thing Webstorm nailed that VS Code doesn’t provide: many, intuitive, automated refactorings.</p>\n<p><img src=\"/extract-function-webstorm-253e9f49e2323fddd9d5fcb72c7de396.gif\" alt=\"Gif of extracting a function in Webstorm\"></p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 458px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 142.35807860262008%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAIAAADuuAg3AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEPElEQVQ4y21VaXPiRhDVT9kk610bBEggcx86EDfoAMSlg8Nc5hRmbWxsdsuVSlL5kr+cB3I5drxVr6ZG0vR09+vXLWIymsxni836Zjq5ttcb4PnH82g4Xi5W+/s9vkplWatpaV5MxlOpBPuCJMsmOaKQKwYDIR9JBWjmMhCkPJTf52foSzz6fQHKS3tcXtrnx+YdPFQ0HCNCTChAMavFyugYPatvtA2gkC1Wldp8Ou+09EQ06frqxhVv4T4nQ5dhAjHQXnp3u5uOp+ulvbW3i9mi1WinEtxsOptN51kxd352AQPywuPgP2OBS2N39uuXz7+c/fbpM1bsXedur9t3cea6+IKDPoRNe1/g81DIEQgHI0QkHJUlZXQ1gvPFbLle2VeDIejhkjwo4VmBS/GIDnsAnqpqDXFlxewxZ1xQLlZqas0yLLxt1JutRquQK8C+VChhFTgBpJ42aYFP5zP5UqGMxxATJigPjdNarTEejuF/s94MB8Net9fvDRaL5eHpMOgPppOpvVrv7u7Xy/X2ZruxN/lsAakRyKFSlgr5oiIp8JBJZxEnvGHlU4LjkMeeFUQhg1XgxGK+xLE86fIQCLjZaHXaur2yQW/X7OK0k+SrJJw9RALg0qpaF9MZ9wWJOofr1boqVzutjqlblVLFIYlLcQ5Jr8BLh0LEiIhIGJMub1NrwX7QG1xPZ/WqhkOOk1eS3wIZSSUJzB09J2JJ0zBhv3/Yj46cjQ+PT3e3d+PRGALGV8AxS8ZZMNLv9tvNNvxTLh+RSedyGSCvSCpqhvJIZQmBmIalyiq4QWFwFII7Rs7yGTF7JDXJRb0BIhoMRELxeDQRuoyg5kCAvoT94en74enpcf/4cP8AepCFQxtOIhY8usG2mApaZq9WrQ+vRuPxZGPfoNqoCj7j3PvkWQTY0JqI66VUlMcPnuWK3LV6lm71uwOjY6LgJ8L5t1ThCoSgyKpcUZAI6SIJ6B6pwh7NhDrznIB2iUXiH6nGmzSfVmQFEoYWXOckIfKiqlRRZzCktw2oBYHh+lepvPMsZColCdSyKT7OBQk0R7/Xb9QbEDBaGtWC1ObXcyTy07DBDm6HMe2nCHSmqZtoDCgEYwz+4Rx8OrX5H9APNbUOUUBhrq8kgf7WqhoisYwuho7e1tutDqbHTxV26tMyRiKoObJdKVZggK5EuzkB22v7fneP/JH2R85QP6eEHhgHmRD6EcJCktATfKJOGAaQHWT80TM4g8KwP3rOZnKW2f+2vZtO5oVcORZJRsMJIBZJxKIQdsrRiYOMmMO0ASkIG5OPiDORlqa060qnobY1tVmTNFWqq5IqSTVFQgOVixLK4wCKkMvy6WUFU4TIxbn9jfn7Tv9xq//zrP/1aPx9MP7YG9+Wxp9YFwbmOfJ/xYlUrB0/FSA8bvwXTv8HimFoBj8Axs/g8fQDOcLZfwSm97+pkd8/GeYf7QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"List of available refactorings in Webstorm\"\n        title=\"\"\n        src=\"/static/webstorm-list-refactorings-099d8bdc53f778ac4c23d9ca40a4e4cc-6bd27.png\"\n        srcset=\"/static/webstorm-list-refactorings-099d8bdc53f778ac4c23d9ca40a4e4cc-9ef71.png 240w,\n/static/webstorm-list-refactorings-099d8bdc53f778ac4c23d9ca40a4e4cc-6bd27.png 458w\"\n        sizes=\"(max-width: 458px) 100vw, 458px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>This made me so productive back in the days. I relied on my editor to move fast.</p>\n<p>And I think it matters. If refactoring code takes 2 keystrokes I’m more likely to do it than if I have to do it by hand, or if I have to find the correct combination of 5 keystrokes to make it work. Great automated refactorings are a productivity boost for every developer.</p>\n<h2 id=\"but-wait-wasnt-there-an-extension-already\"><a href=\"#but-wait-wasnt-there-an-extension-already\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But wait, wasn’t there an extension already?</h2>\n<p>Yes! And I used it for some time. Well… I tried to.</p>\n<p>I essentially work with JavaScript (and TypeScript). I you <a href=\"https://marketplace.visualstudio.com/search?term=js%20refactoring&#x26;target=VSCode&#x26;category=All%20categories&#x26;sortBy=Relevance\">search for “JS refactoring” on VS Code Marketplace</a>, you’ll find a promising extension called “JS Refactor”:</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.7134404057481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABYlAAAWJQFJUiTwAAABI0lEQVQY001Qu07EMBDMd/MBlCc+gCspaKioEdJxdFchSiSEooRc/Fq/X8FMQsFNYc/Oztq7203Tt7UmXMKHkKI5M/7woqQkTZfQWv+dxphuHDmRJ1L/eaVIG+WjmvnqcxZWuYEx1vc9yDiOIB2bnrV6S3lJKaaUMq5cCrH8foh1id6bYfTOtdZOp9Px9ZhzjhHyiu7r45pN9z+tQXTW1ZJra8vjzXJ3BRKI5qeDMwbF+/3tbrcDKaWgstbacXHWWnkf5nnmnKOlEOLcf0o2w3GGSIoLkXJWSmFO/Izmh2EQQnRSQLLWWcHhERgSPW0DFOedJoUQERahhMAq44Ytn7uIVee0fk4ESXvjSVZrkdOWkhQ1BBu9JYkHsBIyq62W6oL7BfkuiKF5wENdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"marketplace js refactoring\"\n        title=\"\"\n        src=\"/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-c83f1.png\"\n        srcset=\"/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-569e3.png 240w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-93400.png 480w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-c83f1.png 960w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-23e13.png 1440w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-10d8f.png 1920w,\n/static/marketplace-js-refactoring-c73c9a2aae5ecf8dd3a4de7251c25c29-a78a6.png 2366w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>I appreciate the good efforts that were put in it. At least someone worked to provide more refactorings, shared that for free and maintained it. But it’s not exactly what I’m looking for, for few reasons:</p>\n<ul>\n<li>It still misses a lot of refactorings I’m looking for. In fact, it doesn’t have many—I don’t consider “Export function” (TK: others) as refactorings, even if they’re handy, because they modify code behaviour.</li>\n<li>It often tended to just <em>not work</em>. I’m not sure about today, but few months back it would fail if I had a JS class in the file. And it didn’t handled TypeScript, nor JSX files.</li>\n<li>It provides features I’m not looking for (code snippets, TK: find list in their README)</li>\n<li>TK: verify still need to select exactly what you want</li>\n<li>The UX is still not the one I expect, (TK: details what’s not great with an example)</li>\n</ul>\n<p>TK: re-install JS refactor and take few screenshots to illustrate</p>\n<p>TK: why not just contributing</p>\n<p>TK: ## conclusion => so I built Abracadabra\nTK: scope and target, next steps</p>\n<p>TK: test JS refactor “Introduce Function”\nTK: test JS refactor “Wrap” => is it actual refactoring?\nTK: test JS refactor “Negate Expression” ==> is it actual refactoring?</p>","fields":{"tagSlugs":["/tags/abracadabra/","/tags/refactoring/","/tags/vscode/","/tags/side-project/"],"slug":"/en/2019/07/introducing-refactoring-tool-vscode/"},"timeToRead":3,"frontmatter":{"title":"Introducing a refactoring tool for VS Code","tags":["abracadabra","refactoring","vscode","side-project"],"date":"2019-07-13T00:00:00.000Z","description":"I built \"Abracadabra\", a VS Code extension to do automated refactorings."}}},"pageContext":{"slug":"/en/2019/07/introducing-refactoring-tool-vscode/"}}