{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about web development, agile practices and personal organization.","fr":"J’écris sur le développement web, les pratiques agiles et l’organisation personnelle."},"author":{"name":"Nicolas Carlo","twitter":"nicoespeon"},"disqusShortname":"nicoespeon","url":"https://www.nicoespeon.com"}},"markdownRemark":{"id":"df0d69cc-fa4b-5db3-afc8-f3f7bdecfd57","html":"<h2 id=\"note-on-compatibility\"><a href=\"#note-on-compatibility\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Note on compatibility</h2>\n<p>What follows consider the use of Jekyll <code class=\"language-text\">v0.12.1</code>.</p>\n<p>Looking for Jekyll <code class=\"language-text\">v1.5</code>? Go have a look <a href=\"/en/2014/04/multilingual-blog-with-jekyll-1-5/\">to the one of April 2014</a>.</p>\n<p>Please note that some major changes happened in Jekyll <code class=\"language-text\">v1.0.0</code> which made some of the following tricks not working anymore (I’m thinking about plugins). I’ll write a new post when upgrade my own Jekyll to v1.0+.</p>\n<p>If you wish, you can still install the old Jekyll version with the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install the old version of jekyll</span>\n$ <span class=\"token function\">sudo</span> gem <span class=\"token function\">install</span> jekyll --version 0.12.1\n\n<span class=\"token comment\"># Uninstall your current version if you dowloaded it</span>\n$ <span class=\"token function\">sudo</span> gem uninstall jekyll --version <span class=\"token operator\">&lt;</span>your current version<span class=\"token operator\">></span></code></pre></div>\n<h2 id=\"why-jekyll\"><a href=\"#why-jekyll\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Jekyll?</h2>\n<p>I won’t write a n-th post about the reason of choosing Jekyll as the static site generator for my blog. There are already <a href=\"https://www.google.fr/search?q=moving+blog+to+jekyll\">plenty of them</a>.</p>\n<p>I’ll just sum it up with the following bullet-points :</p>\n<ul>\n<li><strong>I don’t need to deal with a database</strong>. I just want to Keep It Simple (Stupid) and front-end will just do it well.</li>\n<li><strong>I want to have my website updated when I push it to Github</strong>. I could have done some hook to deal with that but I don’t have to, thanks to <a href=\"https://help.github.com/categories/20/articles\">Github Pages</a>.</li>\n<li><strong>I love keeping myself up-to-date with new trends</strong>. And the Jekyll approach just sounds good to me.</li>\n</ul>\n<p>I could recommend you <a href=\"http://csswizardry.com/2012/12/a-new-css-wizardry/\">the post from Harry Roberts</a> and <a href=\"http://hugogiraudel.com/2013/02/21/jekyll\">the one from Hugo Giraudel</a> which comforted me in my choice.</p>\n<h2 id=\"what-about-multilingual\"><a href=\"#what-about-multilingual\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What about multilingual?</h2>\n<p>The thing is, Jekyll is not actually build to support multinlingual blogs. The <a href=\"http://liquid.rubyforge.org/classes/Liquid/StandardFilters.html#M000012\">Liquid <code class=\"language-text\">date</code> filter</a> will display the english version of the date.\nFuthermore, if you want to distinguish posts by their language, then you have to create a category per language. But the Jekyll <code class=\"language-text\">.paginator</code> is not build to deal with categories, which is kind of a problem.</p>\n<p>Nevertheless, I wanted to create my blog both in French and English for few reasons :</p>\n<ol>\n<li><strong>Most of the nicest websites treating about front-end development are in English</strong>, which is fine but I would like to see few of them written in my native language for other French developers who may not be fluent in English (even if they should be).</li>\n<li><strong>I’m French and proud to be</strong>. Although I love English, there’s no reason for me not to write some posts in my native language too.</li>\n<li><strong>This is a challenge</strong> and I love challenges… as every developer does, right?</li>\n</ol>\n<p>So here’s the strategy:</p>\n<ul>\n<li>English is the default language, at the root level.</li>\n<li>Each language represents a category, which could be done thanks to the folders architecture.</li>\n<li>The French part should be under the <code class=\"language-text\">/fr</code> base url, which is fine with the previous statements.</li>\n<li>English posts should only display into <code class=\"language-text\">/index.html</code>, - French posts should only display into <code class=\"language-text\">/fr/index.html</code> (and the pagination should be done accordingly).</li>\n<li>It should Keep It Simple (Stupid).</li>\n</ul>\n<p>Let’s build the architecture for the source files:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n|-- _includes/      # Partials included in other files\n|-- _layouts/       # Templates of the website\n|-- _plugins/       # Plugins to override Jekyll workflow\n|-- assets/         # LESS/CSS, JS, images, …\n|-- fr/             # French category\n|   |-- _posts/     # French posts\n|   |-- index.html  # French html files\n|   |-- about.html\n|   |-- (…)\n|\n|-- en/             # English category\n|   |-- _posts/     # English posts\n|\n|-- index.html      # Default html files (EN)\n|-- about.html\n|-- (…)\n|-- _config.yml     # Jekyll configuration file</code></pre></div>\n<p>When launched, Jekyll generates the static final website into the <code class=\"language-text\">_site/</code> folder.</p>\n<p>I use the <code class=\"language-text\">_config.yml</code> file to put some locale variables I could use in the main templates.</p>\n<p>This is definitely <strong>not the cleanest solution</strong> in my humble opinion, but it’s quite easy to deal with and it works fine for the moment. It may change in the future in a smarter way to handle this.</p>\n<h2 id=\"plugins-on-the-road\"><a href=\"#plugins-on-the-road\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Plugins on the road</h2>\n<p>In order to solve the mentioned problems, I used 2 plugins to override the regular Jekyll workflow.</p>\n<h4 id=\"1-pagination-per-category\"><a href=\"#1-pagination-per-category\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Pagination per category</h4>\n<p><a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/category_pagination.rb\">category_pagination.rb</a> has the paginator only considers posts of the current category in order to distinguish the two languages.</p>\n<p>I modified the original plugin to have the default category, at root level, set as the <em>English</em> one instead of displaying all of the <code class=\"language-text\">site.posts</code>.</p>\n<h4 id=\"2-i18n-filter\"><a href=\"#2-i18n-filter\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. i18n Filter</h4>\n<p><a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/i18n_filter.rb\">i18n_filter.rb</a> customizes the <code class=\"language-text\">page.date</code> treatment accordingly to the locale.</p>\n<p>I’ve had to add the <a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_locales/fr.yml\">_locales/fr.yml</a> file to create the <code class=\"language-text\">localize</code> function. It performs just as the <code class=\"language-text\">date</code> does, but it displays the French format for the date.</p>\n<h2 id=\"the-github-thing\"><a href=\"#the-github-thing\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Github thing</h2>\n<p>Plugins are set up, templates are built, design has been completed, the git workflow is ready and so is the remote repository on Github. <em>Let’s push!</em></p>\n<p><a href=\"https://help.github.com/articles/setting-up-a-custom-domain-with-pages\">The DNS redirection for my custom domain</a> just works fine but… wait. It doesn’t play as expected.\nDamn it! I just notice that Github is running Jekyll in <code class=\"language-text\">--safe</code> mode, which means that plugins are disabled. And so are my category pagination and my i18n filter.</p>\n<p><strong>For every problem, a solution</strong>, with Google being your best friend. <a href=\"http://charliepark.org/jekyll-with-plugins/\">I found inspiration</a> to redesign my personal workflow in that way.</p>\n<p><em>Let’s have a look to my branching model.</em></p>\n<p>The <code class=\"language-text\">master</code> branch correspond to the compiled website (the one generated into <code class=\"language-text\">_site/</code> directory) so that Github can deliver it directly as a static website, thanks to the <code class=\"language-text\">.nojekyll</code> file.\nThe <code class=\"language-text\">develop</code> branch correspond to the source files, as I would like to keep them tracked and open-sourced. They would be compiled with Jekyll in order to proceed to deployment.\nThere’s no more merge from <code class=\"language-text\">develop</code> into <code class=\"language-text\">master</code> as there’s only deployments from now. I just work on <code class=\"language-text\">develop</code> and, when I’m ready, I deploy the whole site with a new commit on <code class=\"language-text\">master</code>.</p>\n<p>Of course I already pushed the first commits when I realized I was wrong. But instead of recreating the whole repo and rebase my git history, I decided to deal with it with just few commits to correct the situation. There’s no shame in doing mistakes after all.</p>\n<p>I just created a <a href=\"https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/Makefile\">Makefile</a> in order to do all that stuff with a <code class=\"language-text\">make deploy</code> command. And voilà!</p>\n<h2 id=\"and-here-we-go\"><a href=\"#and-here-we-go\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>And here we go</h2>\n<p>Here we are, it just works perfectly and I’m now ready to go with a both English and French, Jekyll-flavored, Github-hosted blog <em>\\o/</em></p>\n<p>There is still enhancements I should take care of -such as deploying a Google Analytics and a comments system- but I’m satisfied with the result. The challenge is taken up and the journey has begun. <strong>Let’s transform these posts into a monster.</strong></p>","fields":{"tagSlugs":["/tags/blog/","/tags/jekyll/","/tags/i-18-n/"],"slug":"/en/2013/04/building-a-multinlingual-jekyll-blog/"},"timeToRead":6,"frontmatter":{"title":"Building a multilanguage Jekyll blog","tags":["blog","jekyll","i18n"],"date":"2013-04-07T00:00:00.000Z","description":"As a first post, what about sharing the way I managed to build this blog? Having a both english and french Jekyll website is not that hard, but you have to care about some crucial points."}}},"pageContext":{"slug":"/en/2013/04/building-a-multinlingual-jekyll-blog/"}}