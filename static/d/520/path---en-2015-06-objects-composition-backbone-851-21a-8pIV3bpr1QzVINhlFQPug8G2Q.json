{"data":{"site":{"siteMetadata":{"title":"@nicoespeon's blog","subtitles":{"en":"I write about web development, agile practices and personal organization.","fr":"J’écris sur le développement web, les pratiques agiles et l’organisation personnelle."},"author":{"name":"Nicolas Carlo","twitter":"nicoespeon"},"disqusShortname":"nicoespeon","url":"http://www.nicoespeon.com"}},"markdownRemark":{"id":"8e6fe9bd-62d2-5d44-88de-b88afc27682b","html":"<h2 id=\"favor-objects-composition-over-inheritance\"><a href=\"#favor-objects-composition-over-inheritance\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“Favor objects composition over inheritance”</h2>\n<p>When you’re doing Object Oriented Programmation (OOP), you create a bunch of objects with their data structure and methods that compose their interface. You decide how to split your objects based on the <em>Single Responsibility Principle</em> (SRP): <strong>each object should have one and only one reason to change</strong>.</p>\n<p>To make interesting stuff happen, you need to combine those objects.</p>\n<p>Roughly, there are 2 types of relationships in an object model: inheritance and composition.</p>\n<p>You can do the analogy with a family tree:</p>\n<ul>\n<li><strong>inheritance</strong> is like a birth: when it happens, this is for life.</li>\n<li><strong>composition</strong> is like a marriage: it happens during the participating objects’ lifetimes, and it can change. Objects can discard partners and get new partners to collaborate with. Please note that objects are surely not monogams.</li>\n</ul>\n<blockquote>\n<p>Source: <a href=\"http://www.amazon.com/Object-Design-Roles-Responsibilities-Collaborations/dp/0201379430\">Object Design - Roles, Responsibilities and Collaborations</a></p>\n</blockquote>\n<h3 id=\"inheritance-all-the-things\"><a href=\"#inheritance-all-the-things\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“Inheritance” all the things!</h3>\n<p>The very first thing JavaScript developers do is trying to mimic rules of pseudo-classical inheritance.</p>\n<p>They usually quickly come up with a lot of <code class=\"language-text\">new</code> everywhere and inheritance chains awfully long. That generally produce something <strong>very hard to maintain</strong>.</p>\n<p>That’s true you’ve got everything you need to do inheritance with classes, interfaces, … in Java.</p>\n<p>This is not JavaScript.</p>\n<h3 id=\"keep-it-simple-seriously\"><a href=\"#keep-it-simple-seriously\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Keep It Simple, Seriously</h3>\n<p>The base rule in JavaScript is <strong>prototypal inheritance</strong>.</p>\n<p>Forget about the technical jargon, just remember you have <strong>objects that can link to other objects</strong> (OLOO).</p>\n<p>Thus, it’s way simpler to encapsulate methods from a same logic into an object, then simply <strong>return this object</strong>. If you need to, you can also create a function that will return an object — which is what we call a <em>factory</em>.</p>\n<p>Then you’ll take this object, eventually compose it with others, to build the prototype which you’ll use to instantiate your class. That simple.</p>\n<p>To sum it up: instead of creating huge, poorly built, inheritance chains from constructors, simply create your objects and compose them to create a prototype you will instantiate your class with.</p>\n<h3 id=\"concatenative-inheritance\"><a href=\"#concatenative-inheritance\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a> Concatenative inheritance</h3>\n<p>Someone notified me that what I’m talking about here is called <strong>multiple inheritance</strong>, not actual <strong>object composition</strong>.</p>\n<p>When you do object composition, you make attributes point to instances of other classes.</p>\n<p>There is no multiple inheritance in JavaScript. Still, composing different prototypes to produce a totally new one is a very close notion, which can be confusing. Here we are talking about “composing prototypes”, but not in the terms of objects composition…</p>\n<p>There you’ll find a more concrete explanation: <a href=\"http://stackoverflow.com/questions/8696695/composition-inheritance-and-aggregation-in-javascript\">Composition, Inheritance, and Aggregation in JavaScript</a></p>\n<p>So, let’s call that <strong>concatenative inheritance</strong>, <a href=\"https://medium.com/javascript-scene/3-different-kinds-of-prototypal-inheritance-es6-edition-32d777fa16c9#.d084tr4c8\">as detailed by Eric Eliott</a>.</p>\n<h2 id=\"with-a-concrete-example\"><a href=\"#with-a-concrete-example\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>With a concrete example</h2>\n<h3 id=\"context\"><a href=\"#context\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context</h3>\n<p>For quite some time I’ve been working full-time on <a href=\"https://beta.vinoga.com\">Vinoga</a>, a social-farming game about wine, developed in HTML5.</p>\n<p>Among few libraries, we use <em>Backbone.js</em> to decouple our views from our data with ease.</p>\n<p>Let’s take a concrete use case: elements on the map.</p>\n<p>If we take a few time to think about it, there are actually 2 types of elements:</p>\n<ol>\n<li><code class=\"language-text\">Props</code> that are decorations elements — trees, rocks, paths…</li>\n<li><code class=\"language-text\">Buildings</code> that are buildings of the game — winery, castle…</li>\n</ol>\n<p>There is, among others, one difference we can notice from now: <code class=\"language-text\">Buildings</code> can be constructed — from the build menu —, not <code class=\"language-text\">Props</code> since they already are on the map.</p>\n<p>Whatever, all these elements share a common behavior: they are on the map. Hence, <code class=\"language-text\">Props</code> and <code class=\"language-text\">Buildings</code> both inherit from <code class=\"language-text\">Objects</code>, which describes the behavior of an “object” on the map.</p>\n<p>But there also are different types of <code class=\"language-text\">Buildings</code>, such as:</p>\n<ul>\n<li><code class=\"language-text\">Markets</code> that are buildings that will reflect the state of the player’s store</li>\n<li><code class=\"language-text\">Productions</code> buildings, that will transform resources — grape, juice — into another product — juice, bottle.</li>\n</ul>\n<figure>\n  \n  <a class=\"gatsby-resp-image-link\" href=\"/static/inheritance-c5d1c32d0d373e9764a9d6e00036a163-34743.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 454px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.90748898678414%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABlklEQVQoz4WSW6/BUBCF+/v9DW/ePIsnilDSuEQQxK1VpaclHNWq86UT1Qo566HZnb3XzJo1ozxSCMNwu90ej8efGLvd7nK5PL5DSf9cr9fZbFav1weDQb/f5wyfeBRF/5Nvt5tpmpqmwVyv15ZlHQ4H4vf7PXoiQ5YQ1/xAKJfLvu/DcV2XFgqFgij/WPxVGX6pVEKqSAD7/T6fz/d6PQ4oMgzDtu0MmfSEPM9bLBbdbvd0OiV1IOCCGCnSNpsNul5kXszn81arBZMKqE3I/Oq63ul0sLDdbg+Hw+l0iqIXmWSO4yyXy/F4vFqtkJCQsZog0siIC9xCzlSWfmSw2Cv2oJPvZDLJ5XLn87nRaBSLRa54Kfo/jCqBVB6NRnTEgeLNZjPZhd8YHJQoBbJS3IyBt5VKJbGAzmlNrmiHdBzeN4xRy2uRBwG1xMkl40xvVIbMO0qhtlarsWSqqjI/LCSXjINItVrFAoQw/wyZTtATBIEdAy9lC4jLevgxsJOybITy5pMRAxqvGQ9kkc3mcTae4MyM/wDE3kzAR/vqLQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"Inheritance, level 1\" title=\"\" src=\"/static/inheritance-c5d1c32d0d373e9764a9d6e00036a163-34743.png\" srcset=\"/static/inheritance-c5d1c32d0d373e9764a9d6e00036a163-5e482.png 240w,\n/static/inheritance-c5d1c32d0d373e9764a9d6e00036a163-34743.png 454w\" sizes=\"(max-width: 454px) 100vw, 454px\">\n    </span>\n  </span>\n  \n  </a>\n    \n  <figcaption>Our initial inheritance chain</figcaption>\n</figure>\n<h3 id=\"about-constructability\"><a href=\"#about-constructability\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>About constructability</h3>\n<p>After we discussed with the Game Designer, we realized that <code class=\"language-text\">Markets</code> are not constructable: they already are on the map.</p>\n<p>Constructability is a behavior that were part of the <code class=\"language-text\">Buildings</code> one until now. But yep, let’s handle that with a little modification of the inheritance chain:</p>\n<figure>\n  \n  <a class=\"gatsby-resp-image-link\" href=\"/static/longer-inheritance-chain-5e2522e4c1e65d6347fd1c5e0b7a33bb-44e45.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 462px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 107.79220779220779%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/klEQVQ4y42Tx67CQAxF5/+/AgmJDSs2rNjRQhdFCFFEDbxHh9BL4CgWUSYIgRfJjGeufX09Vg+PXS6XyWRiWdZyuVytVtPp9Hq9Pj6bkp9t23z3+3273U4kEvV6vVar9Xq97Xbrnn4Ei51Op8FgkMvlms3mn2OwwH+/3+2XaWBxccyGhKlU6na7zefz3W7HNhKJfMksZ9yORqOLxUKKJ1yn0wmHw6PRiOLRgsVms/HGUqZpckCqbrcLW0K4xxyxQLPz+SwR8WhgCqPObDZbrVZJ6wUTNJ/PFwqFZDJZLpe5gEejPRwOZ7MZIdG23+97wa1WCwCCE5Qc3IS5lpkzumo5tl6vpbGiXywWCwaDLEKhUKlUohcivttd5VPSbQl4qKI8ThKi/HvPlHdDbLihLYUgRKVSQd7j8YgnnU5TGuT/HeMCGmsvDFa4YA4AhXlwAEgLhgs4RfnD4cARcbUXBhgJSIjCFMlTEy3RnG2xWMxkMoZhxONxiCCwBkZqGLJAOQaDQOPxmEveFninSPleHLQhCUxYoAJfkkuRKMLA0DlycE09fjCSUCeZQQYCATSnfjx+8PvoiFM6j0hULuH8I/nJoE17oEr/Go0G/FlA/juYnHTLfR7ihPavNZONao2XwVyG5DuYFyqzifIy53zpBXR+ykyFpmMsmDxg9B8VngeF4jVmbixsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"Inheritance, level 2\" title=\"\" src=\"/static/longer-inheritance-chain-5e2522e4c1e65d6347fd1c5e0b7a33bb-44e45.png\" srcset=\"/static/longer-inheritance-chain-5e2522e4c1e65d6347fd1c5e0b7a33bb-32842.png 240w,\n/static/longer-inheritance-chain-5e2522e4c1e65d6347fd1c5e0b7a33bb-44e45.png 462w\" sizes=\"(max-width: 462px) 100vw, 462px\">\n    </span>\n  </span>\n  \n  </a>\n    \n  <figcaption>Our updated inheritance chain to adapt</figcaption>\n</figure>\n<h3 id=\"here-comes-the-drama\"><a href=\"#here-comes-the-drama\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Here comes the drama</h3>\n<p>As time goes, specs evolve and features too: brace yourself, <code class=\"language-text\">Decorations</code> are coming!</p>\n<p><code class=\"language-text\">Decorations</code> are decorations elements — actually, <code class=\"language-text\">Props</code> — except that they are constructables too!</p>\n<p>Well, now we’re a bit stucked since <code class=\"language-text\">ConstructableBuildings</code> inherits from <code class=\"language-text\">Buildings</code>. We’d like not to duplicate <code class=\"language-text\">ConstructableBuildings</code> to recode roughly the same thing into <code class=\"language-text\">Props</code>.</p>\n<p>Looks like we’ll end up with classes that inherit of useless properties at the very best.</p>\n<figure>\n  \n  <a class=\"gatsby-resp-image-link\" href=\"/static/inheritance-issue-a1fde710e3c6d0b04926b28258acb720-9446b.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 500px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 94.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAACPklEQVQ4y42US5OiQBCE+f9/w4MT4d3zeNYj8hhFRFFA3qDyUOj9gNGZ2XUjpqJD2+7OzsqsaiXxT5zPZ8/zkiSJ4zgIgqqqxH9CegleLBbz+Xy5XG42mzzPWWwf8QI8bDRNw/x0Oum6bts2zGEYrtfr4cCvmGezmeM4ZAsnyNFodOmDjIqieAFmNU3TPMs0TZOXyyeV7/uu66Z9AD4cDvf7/Qs8HMIh5MmqujYMaJ/yyBzlpmkqimL2MUj7AUabH4aupm11fW/b4gG2LAvnIOfq/X5vGMbtdvs77VtdJ+dz+fZ2MYy8r83AgO3T6ZRUJ5MJxUPdd+cehg1Lui442DRZlg11lmW5rmt2VqsVOUMbRRHi+1ON9ES2ed4aBpM0SbCA7ev16vWBTzhHCcuy5C7WuZ31LzC6W9PsmiTPEUmpt9sthPhnbjZKbxuVQzxaVFX9CY6idrfjO0tTNvwgAMxR53CwPS9IU2SkWUbxyZzKoUvqkA+w6MF1VZEhzVUWBUmiL1ksUJ8VBS5gODDS5kzPPJTOccTHx9fPIPichKF4f78ZBs0RR9F4PMZznKMFJXE8ijTtxukkXLf7TBIyaZmQiKoKjLjfK0ZZFmVJC5I5zlEzSchyx+n7dBmwDg+Ax7Badet9neiCnWWBQSrtBLLTFceSUJTuHEPTurS5i4Rpo2/NQEkhpNt2Oy6xjscjXiJbon3F5cIjFrxbJth2vX6W4IGHiuJhMu+UCbS0as/8iwBs9A+GgBY8zPzJ/AFvSzOni26t7gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"Inheritance, the problem\" title=\"\" src=\"/static/inheritance-issue-a1fde710e3c6d0b04926b28258acb720-9446b.png\" srcset=\"/static/inheritance-issue-a1fde710e3c6d0b04926b28258acb720-e8980.png 240w,\n/static/inheritance-issue-a1fde710e3c6d0b04926b28258acb720-e7e4f.png 480w,\n/static/inheritance-issue-a1fde710e3c6d0b04926b28258acb720-9446b.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\">\n    </span>\n  </span>\n  \n  </a>\n    \n  <figcaption>We weren&apos;t very smart on this one, now we&apos;re stuck!</figcaption>\n</figure>\n<h3 id=\"why-so-pseudo-classical\"><a href=\"#why-so-pseudo-classical\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why so pseudo-classical?</h3>\n<p>Well, how did we get there? How to get out of here?</p>\n<p>Actually, we were a bit in the hurry when the constructability question appears. Without any more reflexion we came with the logic that ”<code class=\"language-text\">Productions</code> IS a <code class=\"language-text\">ConstructableBuildings</code> that IS a <code class=\"language-text\">Buildings</code> that IS an <code class=\"language-text\">Objects</code>”. Kaboom, inheritance!</p>\n<p>In fact, if we look closer, we could infer that constructability is a <strong>behavior</strong>. You can not say that there is no <code class=\"language-text\">Constructable</code> element without <code class=\"language-text\">Building</code>. This is a subtle error that is so frequent in JavaScript because of pseudo-classical inheritance since this is the only thing you remember: this is the very first — bad — instinct.</p>\n<p>In our case, the only legitimate inheritance chain may be the one that bounds <code class=\"language-text\">Decorations</code> to <code class=\"language-text\">Props</code>. Anyway, I still think that you can get rid of it too.</p>\n<p>What you actually put into <code class=\"language-text\">Objects</code> is a bunch of behaviors that are shared between <code class=\"language-text\">Props</code> and <code class=\"language-text\">Buildings</code>. But technically, <code class=\"language-text\">Objects</code> doesn’t represent anything concrete: this would be an <em>abstract class</em> if we were coding in Java. Just like <code class=\"language-text\">Buildings</code> by the way.</p>\n<h3 id=\"embrace-composition\"><a href=\"#embrace-composition\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Embrace composition</h3>\n<p>In JavaScript, may I suggest another way: let’s describe each behavior into its own object. Let’s get rid of constructors and inheritance chains.</p>\n<p>Then, combine these objects to make the prototype of objects we want to build. No <em>class</em> around, simply objects that <strong>are composed from</strong> other objects. Eventually <em>factories</em> to construct the correct object regarding your needs.</p>\n<figure>\n  \n  <a class=\"gatsby-resp-image-link\" href=\"/static/composition-resolution-0c2f8090902cbae946591a1c5e15a6c2-9446b.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 500px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQoz31Sf4+bMAzl+3+qadL9MU07adV1bdGNI1BCWppykN+ExDNQrp1O25OIjO0XO35OAEEIbLfgHJpq7IlJC/vqop1CEGGF95Dn8PYGux1UFYQAyeSmFNIUrEFzCA7JuTnASo0rHQ0kIL8sQanJMZM5nxxaLym1JSd3vKU/VF/+6hqKIlyvZiWjG3taEWDEGostPBABPsA9iuERn+iMMQn8B4MbK0outtb35j/Qtu0/yEtu3/mcVGdJJLjxMThFGWPJnDfPZSHgGedveap1QtpzZ/66dD6x86ly0/CSlErpeTYRLgA4L4q63Sii7xD4cK9ZFEUUObhWKp1A24mOnWVNa2pRaqUdb9q+OdHQo5jnGMPUlDJGcu4oY8IfL0AryxhP4GV/oj/27c+vT18a1Iwc2+w505vn/VB8B/8Nx3ZrVLNabn6V3B6mnYrXKy6Jsd4p7aWUYgxh1KZ8TbeHDWU8S4/5Ln9v3+/j0NoMo7Sg1ceGParjfUXr7HcmhHCDM9ZYaxdy/CTXHztdtjp3i1n6AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"Composition, the solution\" title=\"\" src=\"/static/composition-resolution-0c2f8090902cbae946591a1c5e15a6c2-9446b.png\" srcset=\"/static/composition-resolution-0c2f8090902cbae946591a1c5e15a6c2-e8980.png 240w,\n/static/composition-resolution-0c2f8090902cbae946591a1c5e15a6c2-e7e4f.png 480w,\n/static/composition-resolution-0c2f8090902cbae946591a1c5e15a6c2-9446b.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\">\n    </span>\n  </span>\n  \n  </a>\n    \n  <figcaption>It&apos;s way simpler to play Legos!</figcaption>\n</figure>\n<p>Here we just augment our prototype with other objects that describe behaviors. That’s what <strong>mixin</strong> is about.</p>\n<p>If your object inherits from another, then prefer to use <strong>prototypal inheritance</strong>.</p>\n<h2 id=\"what-about-backbone\"><a href=\"#what-about-backbone\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What about Backbone?</h2>\n<h3 id=\"backboneextend\"><a href=\"#backboneextend\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Backbone.extend</h3>\n<p>When you use Backbone, you use <code class=\"language-text\">.extend()</code> to override <code class=\"language-text\">Backbone.[Model|Collection|View|…]</code>. Then you instantiate it with <code class=\"language-text\">new</code>.</p>\n<p>Thus, it’s very frequent to follow the pseudo-classical inheritance reflex and to end up with:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ObjectsModel <span class=\"token operator\">=</span> Backbone<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span> … <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> BuildingsModel <span class=\"token operator\">=</span> ObjectsModel<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span> … <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> MarketsModel <span class=\"token operator\">=</span> BuildingsModel<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span> … <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Which, by the way, would be the same than:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> MarketsModel <span class=\"token operator\">=</span> Backbone<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>…<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>…<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>…<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Then you instantiate when needed</span>\n<span class=\"token keyword\">var</span> marketsModel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MarketsModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Backbone is built like that. <code class=\"language-text\">.extend()</code> easily lead us to that slippery slope where Models depend on the others in many not-that-subtle ways.</p>\n<h3 id=\"compose-your-prototype-then-extend\"><a href=\"#compose-your-prototype-then-extend\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compose your prototype THEN extend</h3>\n<p>Even though you need to inherit from Backbone, you can at least limit the damages. Even though <code class=\"language-text\">.extend()</code> exists, you don’t have to use it for every single object you create. The only object we really need to <code class=\"language-text\">.extend()</code> here is <code class=\"language-text\">Backbone.Model</code>.</p>\n<p>The main idea is to compose objects to make to prototype you will <strong>then</strong> use into the <code class=\"language-text\">.extend()</code> of your Model / Collection / View…</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> objectsModelProto <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* … */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> buildingsModelProto <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* … */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> constructablesModelProto <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* … */</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// We compose to make a new prototype.</span>\n<span class=\"token keyword\">var</span> marketsModelProto <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* … */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// -> specific interface for markets</span>\n  objectsModelProto<span class=\"token punctuation\">,</span> <span class=\"token comment\">//</span>\n  buildingsModelProto<span class=\"token punctuation\">,</span> <span class=\"token comment\">// => our mixins</span>\n  constructablesModelProto<span class=\"token punctuation\">,</span> <span class=\"token comment\">//</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* … */</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token comment\">// -> to override mixins, if needed</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Once prototype is created, inherit from Backbone.</span>\n<span class=\"token keyword\">var</span> MarketsModel <span class=\"token operator\">=</span> Backbone<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>marketsModelProto<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Then you instantiate.</span>\n<span class=\"token keyword\">var</span> marketsModel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MarketsModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>You can see how <code class=\"language-text\">objectsModelProto</code>, <code class=\"language-text\">buildingsModelProto</code> and <code class=\"language-text\">constructablesModelProto</code> override the base prototype of <code class=\"language-text\">marketsModelProto</code> to add specific behaviors.</p>\n<h4 id=\"merge-or-assign\"><a href=\"#merge-or-assign\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Merge or assign</h4>\n<p>Please note that might be useful to use <code class=\"language-text\">_.merge</code> instead of <code class=\"language-text\">_.assign</code> if you need to merge attributes deeply. This may be handy with Backbone when you need to merge things like <code class=\"language-text\">events</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> objectsViewProto <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  events<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'click .store'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'store'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'click .turn'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'turn'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  store<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* … */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  turn<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">turn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* … */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n_<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    displayModal<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">displayModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* … */</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    select<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* … */</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  objectsViewProto<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    events<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      click<span class=\"token punctuation\">:</span> <span class=\"token string\">'select'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'click .turn'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'displayModal'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// -></span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//   events: {</span>\n<span class=\"token comment\">//     \"click\": \"select\",</span>\n<span class=\"token comment\">//     \"click .turn\": \"displayModal\"</span>\n<span class=\"token comment\">//   },</span>\n<span class=\"token comment\">//</span>\n<span class=\"token comment\">//   displayModal: function displayModal () { /* … */ },</span>\n<span class=\"token comment\">//   select: function select () { /* … */ },</span>\n<span class=\"token comment\">//   store: function store () { /* … */ },</span>\n<span class=\"token comment\">//   turn: function turn () { /* … */ }</span>\n<span class=\"token comment\">// }</span>\n\n_<span class=\"token punctuation\">.</span><span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    displayModal<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">displayModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* … */</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    select<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* … */</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  objectsViewProto<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    events<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      click<span class=\"token punctuation\">:</span> <span class=\"token string\">'select'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'click .turn'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'displayModal'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// -></span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//   events: {</span>\n<span class=\"token comment\">//     \"click\": \"select\",</span>\n<span class=\"token comment\">//     \"click .store\": \"store\",</span>\n<span class=\"token comment\">//     \"click .turn\": \"displayModal\"</span>\n<span class=\"token comment\">//   },</span>\n<span class=\"token comment\">//</span>\n<span class=\"token comment\">//   displayModal: function displayModal () { /* … */ },</span>\n<span class=\"token comment\">//   select: function select () { /* … */ },</span>\n<span class=\"token comment\">//   store: function store () { /* … */ },</span>\n<span class=\"token comment\">//   turn: function turn () { /* … */ }</span>\n<span class=\"token comment\">// }</span></code></pre></div>\n<h2 id=\"in-conclusion\"><a href=\"#in-conclusion\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>In conclusion</h2>\n<p>Favor <strong>objects composition</strong> over <strong>inheritance</strong>. Don’t use inheritance if it doesn’t really make sense, or is required. Beware overlong inheritance chains: that’s damn fragile.</p>\n<p>What is preferable to avoid:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// markets.model.js</span>\n<span class=\"token keyword\">var</span> MarketsModel <span class=\"token operator\">=</span> ConstructablesModel<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* … */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword\">var</span> marketsModel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MarketsModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Far more flexible, simpler:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// markets.model.js</span>\n<span class=\"token keyword\">var</span> marketsModelProto <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* … */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// -> specific interface of markets</span>\n  objectsModelProto<span class=\"token punctuation\">,</span>\n  buildingsModelProto<span class=\"token punctuation\">,</span>\n  constructablesModelProto\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword\">var</span> MarketsModel <span class=\"token operator\">=</span> Backbone<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span>marketsModelProto<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> marketsModel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MarketsModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Let’s end up this post with few post I recommend you to read if you need to know more about composition and inheritance with JavaScript:</p>\n<ul>\n<li><a href=\"http://www.datchley.name/understanding-prototypes-delegation-composition/\">Understanding Prototypes, Delegation &#x26; Composition</a> > an explanation from A to Z which is simple, clear and illustrated</li>\n<li><a href=\"https://medium.com/javascript-scene/common-misconceptions-about-inheritance-in-javascript-d5d9bab29b0a\">Common Misconceptions about Inheritance in Javascript</a> > detailed FAQ that goes deep on this subject</li>\n</ul>","fields":{"tagSlugs":["/tags/javascript/","/tags/backbone-js/","/tags/oop/"]},"frontmatter":{"title":"Inheritance, composition and Backbone.js","tags":["javascript","backbone.js","oop"],"date":"2015-06-19T00:00:00.000Z","description":"Why objects composition is preferable to inheritance in JavaScript? Most of all, how do you apply this technique with Backbone.js?"}}},"pageContext":{"slug":"/en/2015/06/objects-composition-backbone/"}}